!function(t,e){var i,s=["zoomOut","zoomIn","zoom","fullscreen","getId","open","close","next","prev","destroy","refresh","getOption","getOptions","get","getItems","getTotalCount","getPrev","getCurrent","getNext","getCurrentIndex","getCurrentPosition","isOpened","isClosed","toggleInfo","showInfo","hideInfo","on","off"],n={getNext:"getNextItemAPI",getPrev:"getPrevItemAPI",getCurrent:"getCurrentItemAPI",getItems:"getItemsAPI",zoom:"toggleZoom"},o=window[t]=i=function(t){return this.id=i.instances++,this.NS=i.NS+"-"+this.id,this.initialized=!1,this.API=new i.mjGalleryAPI(this),this.init(t),this.API};i.mjGalleryAPI=function(t){s.forEach(function(e){this[e]=function(){var i=t[n[e]||e].apply(t,arguments);return i===t?this:i}},this),i.DEBUG&&(this.mjGallery=t)},i.NS=t,i.instances=0,i.DIR={LEFT:1,RIGHT:2,UP:3,DOWN:4};var r=function(t,e){return i.EVENT.fire(t,e,this)},h=function(){var t=this.getOption(i.OPTIONS.SCROLLBARS_VISIBILITY),e=i.$win.scrollTop(),s=i.$t(document.body).css(["paddingRight","paddingTop","paddingBottom","marginRight","marginTop","marginBottom"]),n=parseFloat(s.paddingRight),o=parseFloat(s.marginRight);switch(e=e-parseFloat(s.marginTop)-parseFloat(s.marginBottom),t){case i.SCROLLBARS.PADDING:i.$win.outerWidth()>i.$win.innerWidth()&&(i.$t(document.documentElement).addClass(i.CLASS.hideScrollbars).addClass(i.CLASS.hideScrollbarsPadding),i.$t(document.body).css({paddingRight:i.SCROLLBAR_WIDTH+n+o,marginRight:-i.SCROLLBAR_WIDTH}).scrollTop(e));break;case i.SCROLLBARS.MARGIN:i.$win.outerWidth()>i.$win.innerWidth()&&(i.$t(document.documentElement).addClass(i.CLASS.hideScrollbars).addClass(i.CLASS.hideScrollbarsMargin),i.$t(document.body).css({marginRight:-i.SCROLLBAR_WIDTH,paddingRight:n+o}).scrollTop(e));break;case i.SCROLLBARS.OVERFLOW:i.$win.outerWidth()>i.$win.innerWidth()&&i.$t(document.documentElement).addClass(i.CLASS.hideScrollbars).addClass(i.CLASS.hideScrollbarsOverflow)}},l=function(){var t=this.getOption(i.OPTIONS.SCROLLBARS_VISIBILITY),e=i.$t(document.body).scrollTop(),s=i.$t(document.body).css(["marginTop","marginBottom"]),n=parseFloat(s.marginTop),o=parseFloat(s.marginBottom);switch(e+=e?n+o:i.$win.scrollTop()-e,t){case i.SCROLLBARS.PADDING:case i.SCROLLBARS.MARGIN:i.$t(document.documentElement).removeClass(i.CLASS.hideScrollbars).removeClass(i.CLASS.hideScrollbarsPadding).removeClass(i.CLASS.hideScrollbarsMargin),i.$t(document.body).css({paddingRight:"",marginRight:""}),i.$win.scrollTop(e);break;case i.SCROLLBARS.OVERFLOW:i.$t(document.documentElement).removeClass(i.CLASS.hideScrollbars).removeClass(i.CLASS.hideScrollbarsOverflow)}},a=function(){var t=new i.EVENT.Event({current:this.getCurrentItemAPI(),currentIndex:this.getCurrentIndex()},this);r.call(this,i.EVENT.afterOpen,t),this.ignoreEvents=!1},u=function(){var t={};i.USE_TRANSITIONS?(t[i.TRANSITION_PROP]="",t[i.TRANSITION_PROP+"Duration"]="",this.$self.stop().css(t).off(this.withNS(i.TRANSITIONEND)).one(this.withNS(i.TRANSITIONEND),a.bind(this))):(t.opacity=0,t[i.TRANSITION_PROP]="none",this.$self.css(t).stop().animate({opacity:1},i.DEF_FIX_DURATION,i.JS_EASING,a.bind(this)))},c=function(){this.currentItem.unsetAsClosing(),this.infoController.hideItemInfoContent(!0),this.getOption(i.OPTIONS.SCROLLBARS_VISIBILITY)!==i.SCROLLBARS.VISIBLE&&i.SCROLLBAR_WIDTH&&l.call(this),r.call(this,i.EVENT.afterClose)},m=function(t){i.USE_TRANSITIONS?(this.$self.off(this.withNS(i.TRANSITIONEND)).on(this.withNS(i.TRANSITIONEND),function(t){if("visibility"===t.originalEvent.propertyName&&t.target===this.$self[0]){var e={};e[i.TRANSITION_PROP]="",e[i.TRANSITION_PROP+"Duration"]="",this.$self.hide().css(e),c.call(this)}}.bind(this)),this.$self.removeClass(i.CLASS.selfActive)):this.$self.stop().animate({opacity:0},1e3*t,i.JS_EASING,function(){this.$self.removeClass(i.CLASS.selfActive).hide().css({opacity:""}),c.call(this)}.bind(this)),this.currentItem.isZoomedIn()&&this.currentItem.zoom(1,void 0,!0,!0)},f=function(){var t={};i.USE_TRANSITIONS?(t.opacity="",t[i.TRANSITION_PROP]="",t[i.TRANSITION_PROP+"Duration"]="",this.$self.css(t)):(t.opacity=+this.$self.css("opacity"),t[i.TRANSITION_PROP]="none",this.$self.css(t).stop().animate({opacity:1},i.DEF_DURATION,i.JS_EASING))},p=function(){if(!this.ignoreEvents){var t=this.currentItem.getTrfCtrl().getTranslate().x,e=this.pointer.diff.x/2,i=t+e;this.currentItem.getTrfCtrl().translateByState([i]),this.prevItem.getTrfCtrl().translateByState([i]),this.nextItem.getTrfCtrl().translateByState([i])}},d=function(){if(!this.ignoreEvents){var t=this.currentItem.getTrfCtrl().getTranslate().x,e=this.pointer.diff.x/2,i=window.innerWidth/4,s=t+e*(1-Math.min(i,Math.abs(t))/i);this.currentItem.getTrfCtrl().translateByState([s]),this.backFromEdge=!0}},I=function(){if(!this.ignoreEvents){var t=this.currentItem.getTrfCtrl().getTranslate(),e=this.currentItem.getHeight()/4,s=Math.abs(t.y),n=Math.max(0,Math.min(s/e,1));this.currentItem.setOpacity(1-n).getTrfCtrl().translate([0,this.pointer.startDiff.y]);var o={opacity:""};o[i.TRANSITION_PROP]="none",1===n&&(s-=e,n=Math.max(0,Math.min(s/e,1)),o.opacity=1-n),this.$self.css(o)}},y=function(){if(!this.zoomingResetAnim)return this.zoomingAnim?void(this.zoomResetAfterZooming=!0):void(this.currentItem.isZoomedIn()&&(this.ignoreEvents=!0,this.zoomingResetAnim=!0,this.currentItem.zoom(1,{x:50,y:50},!0,!0,function(){this.zoomingResetAnim=!1,this.ignoreEvents=!1}.bind(this))))},S=function(t){var e=this.currentItem.getZoomRect(),s=!(!t||!t.originalEvent.touches)&&2===t.originalEvent.touches.length,n=t?i.getClientValue(t,0,"X")-e.left:window.innerWidth/2-e.left,o=t?i.getClientValue(t,0,"Y")-e.top:window.innerHeight/2-e.top,r=s?i.getClientValue(t,1,"X")-e.left:null,h=s?i.getClientValue(t,1,"Y")-e.top:null,l=s?(n+r)/2:n,a=s?(o+h)/2:o;return{x:l/e.width*100,y:a/e.height*100}},T=function(){if(this.ignoreEvents=!1,this.zoomingAnim=this.backFromScaleEdge&&!this.zoomResetAfterZooming,this.zoomResetAfterZooming)return this.zoomResetAfterZooming=!1,void y.call(this);this.backFromScaleEdge&&this.currentItem.zoom(this.backFromScaleEdgeValue,null,i.EDGE_ANIM_START_DURATION/1e3,!0,function(){this.ignoreEvents=!1,this.zoomingAnim=!1,this.zoomResetAfterZooming&&(this.zoomResetAfterZooming=!1,y.call(this))}.bind(this))},E=function(t,e,s){if(!this.zoomingAnim&&!this.zoomingResetAnim&&this.currentItem.isZoomable()){var n=this.currentItem.getTrfCtrl().getZoomScale().x,o=0;t?(o=n>=2?-1:n-2,1===n&&(o=-.125)):(o=n<=i.MAX_ZOOM-1?1:i.MAX_ZOOM-n,n===i.MAX_ZOOM&&(o=.375));var r=n+o;e||(e=S.call(this,!1===s?null:this.pointer.event)),this.backFromScaleEdge=r>i.MAX_ZOOM||r<1,this.backFromScaleEdgeValue=r>i.MAX_ZOOM?i.MAX_ZOOM:r<1?1:r,this.ignoreEvents=!0,this.zoomingAnim=!0,this.currentItem.zoom(r,e,!this.backFromScaleEdge||i.EDGE_ANIM_START_DURATION/1e3,!0,T.bind(this))}},g=function(t){var e=this.currentItem.getTrfCtrl().getZoomScale().x,s=this.pointer.pinch.diff/i.GET_MAX_MOVE_OVER(),n=this.pointer.scaleUp()?i.MAX_ZOOM:1,o=this.pointer.scaleUp()?i.MAX_ZOOM+.5:.75,r=e+s,h=null;r>=n&&this.pointer.scaleUp()&&(r=e+s*(1-Math.min(o-(i.MAX_ZOOM-1),Math.abs(e-i.MAX_ZOOM))/(o-(i.MAX_ZOOM-1)))),r<=n&&this.pointer.scaleDown()&&(r=e+s*(1-Math.min(1-o,1-Math.abs(e))/(1-o))),r=Math.max(.1,Math.min(10,Math.abs(r))),t&&(h=S.call(this,this.pointer.event)),this.backFromScaleEdge=r>i.MAX_ZOOM||r<1,this.backFromScaleEdgeValue=r>i.MAX_ZOOM?i.MAX_ZOOM:r<1?1:r,this.zoomingAnim=!1,this.zoomingResetAnim=!1,this.ignoreEvents=!1,this.currentItem.zoom(r,h)},v=function(){var t=this.currentItem.getTrfCtrl().getScale().x,e=this.pointer.pinch.diff/this.pointer.pinch.startDist,s=t>=1&&this.pointer.scaleUp()?t+e*(1-Math.min(1.25,Math.abs(t))/1.25):t+e,n=Math.min(3*(1-t),1);s=Math.abs(s),this.allowScaleUpOnCancelCloseByScale=this.allowScaleUpOnCancelCloseByScale||s<1,this.currentItem.setOpacity(1-n).scale([s]);var o={opacity:""};o[i.TRANSITION_PROP]="none",1===n&&(n=Math.min(3*(1-t-.33333),1),o.opacity=1-n),this.$self.css(o)},O=function(){if(this.zoomMode)return g.call(this),this;if(!this.pointer.scaleUp()||this.currentItem.isZoomable()||this.allowScaleUpOnCancelCloseByScale){if(this.zoomMode=this.currentItem.isZoomable()&&this.pointer.scaleUp()&&!this.allowScaleUpOnCancelCloseByScale||this.currentItem.isZoomedIn(),this.zoomMode)return g.call(this,!0),this;v.call(this)}},A=function(){if(this.ignoreEvents)return void(this.zoomMode=this.currentItem.isZoomedIn());var t=this.pointer.diff.x/2,e=this.pointer.diff.y/2;this.currentItem.translateZoomBy([t,e]),this.zoomMode=!0,this.lastMoveZoomedItem=Date.now()},C=function(t){if(this.pointer.onMove(t),1===this.pointer.count&&!this.pointer.realMove())return void t.preventDefault();if(this.backFromEdge=!1,this.pointerCountOnStart>1&&this.pointer.count<2&&!this.itemDirFix)return void i.$win.trigger(this.withNS("touchend"));if(this.backFromScaleEdge=!1,this.pointer.count>1&&!this.itemDirFix){var e=this.currentItem.getTrfCtrl().getScale().x;return O.call(this),this.possibleCloseByScale=this.pointer.scaleDown()&&e<1,this.possibleClose=!1,this.possibleItemChange=!1,!1}if(1===this.pointer.count&&!this.itemDirFix&&this.currentItem.isZoomedIn())return A.call(this),!1;this.itemDirFix=this.itemDirFix||this.pointer.dirFix({dir:i.Pointer.DIR.VER,value:this.pointer.isTouch()?2:0});var s=this.currentItem.getTrfCtrl().getTranslate();return this.itemDirFix===i.Pointer.FIX.HOR?(this.possibleItemChange=this.pointer.left()&&s.x<0||this.pointer.right()&&s.x>0,1===this.totalCount&&this.possibleItemChange?(d.call(this),this.possibleItemChange=!1):2===this.totalCount&&this.possibleItemChange&&(this.prevItem.isEmpty()&&this.pointer.right()||this.nextItem.isEmpty()&&this.pointer.left())?(d.call(this),this.possibleItemChange=!1):p.call(this),this.possibleClose=!1,this.possibleCloseByScale=!1):(I.call(this),this.possibleClose=this.pointer.up()&&s.y<0||this.pointer.down()&&s.y>0,this.possibleItemChange=!1,this.possibleCloseByScale=!1),!1},N=function(){return this.possibleItemChange&&Math.abs(this.pointer.startDiff.x)<i.MIN_MOVE_TO_CHANGE||this.possibleClose&&Math.abs(this.pointer.startDiff.y)<i.MIN_MOVE_TO_CHANGE||!this.scaling&&this.possibleCloseByScale&&Math.abs(this.pointer.pinch.startDiff)<i.MIN_MOVE_TO_CHANGE||!this.possibleClose&&!this.possibleItemChange&&(this.itemDirFix!==i.Pointer.FIX.HOR||this.backFromEdge)&&!this.possibleCloseByScale&&!this.backFromScaleEdge},P=function(){this.itemDirFix=!1,this.zoomMode=!1,this.focusOnEnd&&i.$t(this.focusOnEnd).focus(),this.currentItem.isZoomable()&&this.pointer.isMouse()&&(1===this.pointer.event.which?E.call(this):2===this.pointer.event.which&&y.call(this))},R=function(){var t=this.pointer.getDiff();Date.now()-this.lastMoveZoomedItem<30&&(Math.abs(t.x)>3||Math.abs(t.y)>3)?(this.pointer.isTouch()&&(t.x/=2,t.y/=2),this.currentItem.getTrfCtrl().slideZoom([t.x,t.y])):this.currentItem.fitZoom(function(){this.ignoreEvents=!1}.bind(this)),this.itemDirFix=!1,this.zoomMode=!1},M=function(){this.ignoreEvents=!0,this.currentItem.zoom(this.backFromScaleEdgeValue,null,!0,!0,function(){this.ignoreEvents=!1,this.zoomingAnim=!1}.bind(this)),this.itemDirFix=!1,this.zoomMode=!1},_=function(){var t,e,s;this.possibleCloseByScale?(s=Math.max(1,8-Math.log(Math.min(window.innerWidth,window.innerHeight)+Math.abs(window.innerWidth-window.innerHeight)/2)),e=this.pointer.pinch.diff*s,t=(i.MIN_DURATION+i.MAX_DURATION-Math.max(i.MIN_DURATION,Math.min(i.MAX_DURATION,20*Math.abs(e))))/1e3):(s=Math.max(1,8-Math.log(window.innerWidth)),e=this.pointer.diff.y*s,t=(i.MIN_DURATION+i.MAX_DURATION-Math.max(i.MIN_DURATION,Math.min(i.MAX_DURATION,Math.abs(e)*(this.pointer.isMouse()?25:10))))/1e3,window.innerHeight>window.innerWidth&&(t*=window.innerHeight/window.innerWidth)),this.close(!this.possibleCloseByScale,this.possibleCloseByScale,this.pointer.up()?i.DIR.UP:i.DIR.DOWN,t),this.itemDirFix=!1},b=function(){var t,e,s;if(s=Math.max(1,8-Math.log(window.innerWidth)),e=this.pointer.diff.x*s,t=(i.MIN_DURATION+i.MAX_DURATION-Math.max(i.MIN_DURATION,Math.min(i.MAX_DURATION,12*Math.abs(e))))/1e3,this.possibleItemChange)this[this.pointer.left()?"next":"prev"](t);else{var n=this.nextItem.isEmpty()&&this.pointer.right()||this.prevItem.isEmpty()&&this.pointer.left();this.resetToCurrent(n?t/2:t)}this.itemDirFix=!1},w=function(){return i.$win.off(this.withNS("mousemove","touchmove")),this.$self.removeClass(i.CLASS.selfGrabbing),this.eventsActive=!1,this.pointer.moved?this.zoomMode&&!this.backFromScaleEdge?(R.call(this),!1):(this.zoomMode=!1,N.call(this)?(this.resetToCurrent(),f.call(this),this.itemDirFix=!1,!1):this.backFromScaleEdge?(M.call(this),!1):this.itemDirFix===i.Pointer.FIX.VER||this.possibleCloseByScale?(_.call(this),!1):(b.call(this),!1)):void P.call(this)},L=function(t){if(this.focusOnEnd=!1,this.zoomMode=!1,!this.currentItem.shouldPreserveEvent(i.EVENTS.POINTER,t)){if(this.pointer.onStart(t),this.pointerCountOnStart=this.pointer.count,this.ignoreEvents||this.eventsActive||this.pointer.count>2)return void t.preventDefault();this.pointer.isDblTap()&&this.toggleZoom(),this.eventsActive=!0,this.$self.addClass(i.CLASS.selfGrabbing),this.currentItem.refreshSize(),this.nextItem.refreshSize(),this.prevItem.refreshSize();var e=this.withNS("mousemove","touchmove"),s=this.withNS("mouseup","touchend");i.$win.off(e).on(e,C.bind(this)),i.$win.off(s).one(s,w.bind(this)),this.resetScroll(),i.$t(t.target).is(i.FOCUSABLE)&&(this.focusOnEnd=t.type.match(/touch/)?t.target:null,this.focusOnEnd||i.$t(t.target).focus()),t.preventDefault()}},$=function(t,e){t.type.match(/touchmove|touchstart/)||e||"touchend"===t.type&&1!==t.originalEvent.touches.length||(this.open(t.currentTarget),t.preventDefault())},x=function(){if(this.pointer=new i.Pointer,this.$self.off(this.withNS("mousedown","touchstart","mouseup","touchend","mousemove","touchmove","contextmenu","dblclick")),this.$self.on(this.withNS("dblclick"),i.CLASS.selector("itemContent"),function(){this.currentItem.isZoomable()&&y.call(this)}.bind(this)),this.$self.on(this.withNS("contextmenu"),i.CLASS.selector("itemContent"),function(){if(this.currentItem.isZoomedIn()&&!this.ignoreEvents)return E.call(this,!0),!1}.bind(this)),this.$self.on(this.withNS("mousedown","touchstart"),i.CLASS.selector("draggable"),L.bind(this)),i.$win.off(this.withNS("resize")).on(this.withNS("resize"),function(){r.call(this,i.EVENT.resize),this.currentItem&&this.currentItem.isZoomable()&&(this.ignoreEvents=!0,this.currentItem.fitZoom(function(){this.ignoreEvents=!1}.bind(this)))}.bind(this)),this.getOption(i.OPTIONS.OPENING_ELEMENT)){this.$openingElement=i.jQueryfy(this.getOption(i.OPTIONS.OPENING_ELEMENT));var t=!1,e=this.withNS("click","touchend","touchmove","touchstart");this.$openingElement.off(e).on(e,function(e){$.call(this,e,t),t=e.type.match(/move/)}.bind(this))}if(this.options.isSetByUser(i.OPTIONS.ITEMS_SELECTOR)||!this.getOption(i.OPTIONS.OPENING_ELEMENT)&&this.getOption(i.OPTIONS.ITEMS_SELECTOR)){var s=!1,n=this.withNS("click","touchend","touchmove","touchstart");i.$doc.off(n).on(n,this.getOption(i.OPTIONS.ITEMS_SELECTOR),function(t){$.call(this,t,s),s=t.type.match(/move/)}.bind(this))}},D=function(){this.$self.off("."+this.NS),i.$win.off("."+this.NS),i.$doc.off("."+this.NS),i.EVENT.off(null,null,this),this.refreshing||(this.userEvents={})},G=function(){this.$itemsList=this.$self.find(i.CLASS.selector("items")),this.$overlay=this.$self.find(i.CLASS.selector("overlay"))};o.prototype.init=function(t){if(!this.initialized){var s=new i.EVENT.Event({options:this.prevOptions?e.extend(this.prevOptions,t||{}):t},this);return r.call(this,i.EVENT.construct,s),s.isDefaultPrevented()?this:(this.userEvents={},this.options=new i.Options(this.prevOptions||t,this),this.$self=e(i.TEMPLATE.SELF({zoomBtn:this.getOption(i.OPTIONS.SHOW_BTN_ZOOM),infoBtn:this.getOption(i.OPTIONS.SHOW_BTN_INFO),fullscreenBtn:this.getOption(i.OPTIONS.SHOW_BTN_FULLSCREEN),closeBtn:this.getOption(i.OPTIONS.SHOW_BTN_CLOSE)})),G.call(this),this.$self.attr("id",this.NS),this.options.init(),this.$overlay.css("opacity",this.getOption(i.OPTIONS.OVERLAY_OPACITY)),this.itemDirFix=null,this.possibleItemChange=null,this.possibleClose=null,this.possibleCloseByScale=null,this.backFromEdge=null,this.backFromScaleEdge=null,this.zoomingAnim=!1,this.zoomingResetAnim=!1,this.zoomMode=!1,this.lastMoveZoomedItem=Date.now(),this.firstOpen=!0,this.opened=!1,this.closed=!0,i.$t(document.body).append(this.$self),x.call(this),this.itemsGenerator=new i.ItemsGenerator(this,this.options),this.infoController=new i.InfoController(this),this.UIController=new i.UIController(this,this.infoController),this.initialized=!0,r.call(this,i.EVENT.init),this)}},o.prototype.destroy=function(){if(this.initialized){if(this.prevOptions=null,!this.refreshing){var t=new i.EVENT.Event({current:this.getCurrentItemAPI(),currentIndex:this.getCurrentIndex()},this);if(r.call(this,i.EVENT.beforeDestroy,t),t.isDefaultPrevented())return this;this.prevOptions=this.options.get()}return D.call(this),this.infoController=this.UIController=this.itemsGenerator=this.options=this.pointer=this.API=null,this.currentItem=this.prevItem=this.nextItem=this.items=null,this.$self.remove(),this.$controller=this.$self=null,this.initialized=!1,this.firstOpen=!0,r.call(this,i.EVENT.afterDestroy),this}},o.prototype.refresh=function(t,s){t=s?e.extend({},this.options.getOriginal(),t):t;var n=new i.EVENT.Event({current:this.getCurrentItemAPI(),currentIndex:this.getCurrentIndex()},this);return r.call(this,i.EVENT.beforeRefresh,n),n.isDefaultPrevented()?this:(this.refreshing=!0,this.destroy(),e.each(this.userEvents,function(t,e){e.forEach(function(e){i.EVENT.on(t,e,this)},this)}.bind(this)),this.init(t),this.refreshing=!1,r.call(this,i.EVENT.afterRefresh),this)},o.prototype.getOpeningElement=function(){return this.$openingElement},o.prototype.getItemsList=function(){return this.$itemsList},o.prototype.getOption=function(t){return t?this.options.get(t):this.getOptions().get()},o.prototype.getOptions=function(){return this.options},o.prototype.get=function(){return this.$self},o.prototype.getId=function(){return this.id},o.prototype.getAPI=function(){return this.API},o.prototype.getItems=function(){return this.items},o.prototype.getItemsAPI=function(){return this.items.map(function(t){return t.getAPI()})},o.prototype.refreshItemInfo=function(){return this.infoController.showItemInfo(),this},o.prototype.resetScroll=function(){return this.$itemsList.scrollLeft(0).scrollTop(0),this},o.prototype.getTotalCount=function(){return this.totalCount},o.prototype.getCurrentItem=function(){return this.currentItem&&!this.currentItem.isEmpty()?this.currentItem:null},o.prototype.getPrevItem=function(){return this.prevItem&&!this.prevItem.isEmpty()?this.prevItem:null},o.prototype.getNextItem=function(){return this.mextItem&&!this.mextItem.isEmpty()?this.mextItem:null},o.prototype.getCurrentItemAPI=function(){return this.currentItem&&!this.currentItem.isEmpty()?this.currentItem.API:null},o.prototype.getPrevItemAPI=function(){return this.prevItem&&!this.prevItem.isEmpty()?this.prevItem.API:null},o.prototype.getNextItemAPI=function(){return this.mextItem&&!this.mextItem.isEmpty()?this.mextItem.API:null},o.prototype.getCurrentIndex=function(){return this.currentItem?this.currentItem.getIndex():-1},o.prototype.getCurrentPosition=function(){return this.getCurrentIndex()+1},o.prototype.zoomIn=function(){return E.call(this,!1,null,!1),this},o.prototype.zoomOut=function(){return E.call(this,!0,null,!1),this},o.prototype.fullscreen=function(t){return this.UIController.fullscreen(t),this},o.prototype.toggleInfo=function(){return this.UIController.toggleInfo(),this},o.prototype.showInfo=function(){return this.UIController.showInfo(),this},o.prototype.hideInfo=function(){return this.UIController.hideInfo(),this},o.prototype.isOpened=function(){return this.opened},o.prototype.isClosed=function(){return this.closed},o.prototype.initItems=function(t){this.items=this.itemsGenerator.generate(t),this.totalCount=this.itemsGenerator.getTotalCount(),this.emptyItem=this.itemsGenerator.getEmptyItem(),this.prevItem=this.itemsGenerator.getPrevItem(),this.nextItem=this.itemsGenerator.getNextItem(),this.currentItem=this.itemsGenerator.getCurrentItem()},o.prototype.open=function(t){if(this.$self){this.opened=!0,this.closed=!1,this.initItems(t),this.opened=!1,this.closed=!0;var e=new i.EVENT.Event({current:this.getCurrentItemAPI(),currentIndex:this.getCurrentIndex()},this);if(this.firstOpen&&(r.call(this,i.EVENT.beforeFirstOpen,e),this.firstOpen=!1),r.call(this,i.EVENT.beforeOpen,e),e.isDefaultPrevented())return this;this.opened=!0,this.closed=!1,this.$self.show(),u.call(this),this.$self.addClass(i.CLASS.selfActive),this.getOption(i.OPTIONS.SCROLLBARS_VISIBILITY)!==i.SCROLLBARS.VISIBLE&&i.SCROLLBAR_WIDTH&&h.call(this);var s=new i.EVENT.Event({current:this.getCurrentItemAPI(),currentIndex:this.getCurrentIndex()},this);r.call(this,i.EVENT.open,s)}return this},o.prototype.close=function(t,e,s,n){if(this.$self){var o=new i.EVENT.Event({current:this.getCurrentItemAPI(),currentIndex:this.getCurrentIndex()},this);if(r.call(this,i.EVENT.beforeClose,o),o.isDefaultPrevented())return this;n=n||i.DEF_FIX_DURATION/1e3,this.opened=!1,this.closed=!0;var h={};(t||e)&&(this.currentItem.setAsClosing(n,s,t,e),i.USE_TRANSITIONS?(n=n||i.DEF_DURATION/1e3,h.opacity="",h[i.TRANSITION_PROP]="opacity "+n+"s ease-in 0s, visibility 0s linear "+n+"s",h[i.TRANSITION_PROP+"Duration"]=n+"s"):(h.opacity=+this.$self.css("opacity"),h[i.TRANSITION_PROP]=""),this.$self.css(h)),m.call(this,n),r.call(this,i.EVENT.close)}return this},o.prototype.prev=function(t){if(this.$self&&!this.ignoreEvents){if(1===this.totalCount||2===this.totalCount&&0===this.getCurrentIndex())return this.ignoreEvents=!0,this.currentItem.getTrfCtrl().edgeAnim(i.DIR.LEFT,function(){this.ignoreEvents=!1}.bind(this)),this;if(this.fireChangeEvent(i.EVENT.beforeChange).isDefaultPrevented())return this.resetToCurrent(t),this;t=t||i.DEF_DURATION/1e3,this.ignoreEvents=!0,this.nextItem.getTrfCtrl().clearTransform(),this.swapItemsBackwards(),this.nextItem.setAsNext(t),this.currentItem.setAsCurrent(t,function(){this.prevItem.setAsPrev(),this.fireChangeEvent(i.EVENT.afterChange),this.nextItem.clearOpacity(),this.clearStateOfInvisibleItems(),this.ignoreEvents=!1}.bind(this)),this.fireChangeEvent(i.EVENT.change)}return this.resetScroll(),this},o.prototype.next=function(t){if(this.$self&&!this.ignoreEvents){if(1===this.totalCount||2===this.totalCount&&1===this.getCurrentIndex())return this.ignoreEvents=!0,this.currentItem.getTrfCtrl().edgeAnim(i.DIR.RIGHT,function(){this.ignoreEvents=!1}.bind(this)),this;if(this.fireChangeEvent(i.EVENT.beforeChange).isDefaultPrevented())return this.resetToCurrent(t),this;t=t||i.DEF_DURATION/1e3,this.ignoreEvents=!0,this.prevItem.getTrfCtrl().clearTransform(),this.swapItemsForwards(),this.prevItem.setAsPrev(t),this.currentItem.setAsCurrent(t,function(){this.nextItem.setAsNext(),this.fireChangeEvent(i.EVENT.afterChange),this.ignoreEvents=!1,this.prevItem.clearOpacity(),this.clearStateOfInvisibleItems()}.bind(this)),this.fireChangeEvent(i.EVENT.change)}return this.resetScroll(),this},o.prototype.fireChangeEvent=function(t){var e=new i.EVENT.Event({current:this.getCurrentItemAPI(),next:this.getNextItemAPI(),prev:this.getPrevItemAPI(),currentIndex:this.getCurrentIndex()},this);return r.call(this,t,e),e},o.prototype.swapItemsForwards=function(){return this.prevItem=this.currentItem,this.currentItem=this.nextItem,this.nextItem=this.items[this.getCurrentIndex()+1]||this.emptyItem,this.nextItem.isEmpty()&&this.totalCount>2&&(this.nextItem=this.items[0]),this},o.prototype.swapItemsBackwards=function(){return this.nextItem=this.currentItem,this.currentItem=this.prevItem,this.prevItem=this.items[this.getCurrentIndex()-1]||this.emptyItem,this.prevItem.isEmpty()&&this.totalCount>2&&(this.prevItem=this.items[this.items.length-1]),this},o.prototype.clearStateOfInvisibleItems=function(){return this.items.forEach(function(t){~[this.currentItem,this.prevItem,this.nextItem].indexOf(t)||t.clearState()},this),this},o.prototype.resetToCurrent=function(t){var e=this.currentItem.getTrfCtrl(),s=e.getTranslate(),n=e.getScale();return this.ignoreEvents=!(!s.x&&!s.y&&1===n.x),t=t||i.DEF_DURATION/1e3,this.currentItem.clearOpacity(t).getTrfCtrl().clearTransform(t,function(){this.ignoreEvents=!1,this.allowScaleUpOnCancelCloseByScale=!1}.bind(this)),this.prevItem.clearOpacity(t).getTrfCtrl().clearTransform(t),this.nextItem.clearOpacity(t).getTrfCtrl().clearTransform(t),this.resetScroll(),this},o.prototype.toggleZoom=function(t){this.currentItem.isZoomable()&&(this.currentItem.isZoomedIn()?y.call(this):E.call(this,!1,t))},o.prototype.withNS=function(t){t=t instanceof Array?t:Array.prototype.slice.call(arguments);var e="."+this.NS+" ";return(t.join(e)+e).trim()},o.prototype.on=function(t,e){return this.userEvents[t]=this.userEvents[t]||[],this.userEvents[t].push(e),i.EVENT.on(t,e,this),this},o.prototype.off=function(t,e){return this.userEvents[t]&&(this.userEvents[t]=this.userEvents[t].filter(function(t){return t!==e})),i.EVENT.off(t,e,this),this}}("mjGallery",jQuery),function(t,e){t.DEBUG=!1,t.TRANSFORM_PREFIX="",t.TRANSFORM_PROP=function(){var e=document.createElement("div"),i=["","o","ms","moz","webkit"],s="transform";return i.some(function(i){var n=i?i+"Transform":"transform";if(void 0!==e.style[n])return s=n,t.TRANSFORM_PREFIX=i?"-"+i+"-":"",!0}),s}(),t.T3D=function(){var e=document.createElement("div");return e.style[t.TRANSFORM_PROP]="translate3d(0,0,0)",!!e.style[t.TRANSFORM_PROP]}(),t.TRANSITION_PROP="transition",t.TRANSITION_PREFIX="",t.TRANSITIONEND=function(){var e=document.createElement("div"),i=["transition","transitionend","","OTransition","otransitionend","-o-","MozTransition","transitionend","-moz-","WebkitTransition","webkitTransitionEnd","-webkit-"],s=0,n=i.length;for(s;s<n;s+=3)if(void 0!==e.style[i[s]])return t.TRANSITION_PROP=i[s],t.TRANSITION_PREFIX=i[s+2],i[s+1];return null}(),t.USE_TRANSITIONS=!!t.TRANSITIONEND,t.SUPPORTS_OBJECT_FIT=function(){return void 0!==document.createElement("div").style.objectFit}(),t.SUPPORTS_FULLSCREEN=!1,t.EXIT_FULLSCREEN_FN="exitFullscreen",t.REQUEST_FULLSCREEN_FN=function(){var e=document.createElement("div"),i=["","ms","moz","webkit"],s="",n="",o="";return i.some(function(t){var i=t?t+"RequestFull":"requestFull";if(e[i+"Screen"]?o="Screen":e[i+"screen"]&&(o="screen"),o)return s=t,n=i+o,!0}),t.SUPPORTS_FULLSCREEN=!!n,t.SUPPORTS_FULLSCREEN&&(t.EXIT_FULLSCREEN_FN=s?s+"ExitFull"+o:"exitFull"+o,!document[t.EXIT_FULLSCREEN_FN]&&document[s?s+"CancelFull"+o:"cancelFull"+o]&&(t.EXIT_FULLSCREEN_FN=s?s+"CancelFull"+o:"cancelFull"+o)),n}(),t.SCROLLBAR_WIDTH=function(){function i(){var t=document.createElement("div"),e=document.createElement("div");t.style.cssText="width: 100px; height: 100px; overflow: scroll;",e.style.cssText="width: 100%; height: 100%;",t.appendChild(e),document.body.appendChild(t);var i=t.offsetWidth-e.offsetWidth;return document.body.removeChild(t),i}return document.body?t.SCROLLBAR_WIDTH=i():e(function(){t.SCROLLBAR_WIDTH=i()}),17}(),t.extend=function(t,e){var i=function(t){function e(){}return e.prototype=t,new e}(e.prototype);i.constructor=t,t.prototype=i},t.getTransformValue=function(i){var s=[];return e.each(i,function(e,i){"translate"===e?(i=i.map(function(t){return"number"==typeof t?t+"px":t}),i.length<2&&i.push("0px"),t.T3D&&i.length<3&&i.push("0px")):"scale"===e&&(i.length<2&&i.push(i[0]),t.T3D&&i.length<3&&i.push(1)),!t.T3D&&i.length>2&&(i=i.slice(0,2)),s.push(e+(t.T3D?"3d":"")+"("+i.join(", ")+")")}),s.join(" ")},t.$win=e(window),t.$doc=e(document),t.FOCUSABLE="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",t.NOT_FULL_SIZE_ITEMS_WIDTH=85,t.MIN_MOVE_TO_CHANGE=window.innerWidth<768?window.innerWidth<480?35:50:75,t.TRANTSLATE_ZOOM_STEP=15,t.MAX_ZOOM=4,t.DEF_FIX_DURATION=300,t.DEF_DURATION=window.innerWidth<=1024?window.innerWidth<768?250:300:350,t.MIN_DURATION=window.innerWidth<768?200:250,t.MAX_DURATION=window.innerWidth<768?650:750,t.EDGE_ANIM_START_DURATION=150,t.GET_MAX_MOVE_OVER=function(){return Math.sqrt(Math.pow(window.innerWidth,2)+Math.pow(window.innerHeight,2))/6},t.JS_EASING="easeOutQuad",e.easing.easeOutQuad=e.easing.easeOutQuad||function(t){return 1-(1-t)*(1-t)},e.easing.easeInQuad=e.easing.easeInQuad||function(t){return t*t},e.easing.easeOutQuart=e.easing.easeOutQuart||function(t){return 1-Math.pow(1-t,4)},t.$win.on("resize."+t.NS,function(){t.MIN_MOVE_TO_CHANGE=window.innerWidth<768?window.innerWidth<480?35:50:75,t.DEF_DURATION=window.innerWidth<=1024?window.innerWidth<768?250:300:350,t.MIN_DURATION=window.innerWidth<768?200:250,t.MAX_DURATION=window.innerWidth<768?650:750}),t.$t=function(){var t=e([null]);return function(e){return t[0]=e,t}}(),t.getClientValue=function(e,i,s){var n=0;if("number"==typeof i&&(n=i,i=s),void 0===i)return{x:t.getClientValue(e,n,"x"),y:t.getClientValue(e,n,"y")};var o="client"+i.toUpperCase();return e=e.originalEvent||e,"number"==typeof e[o]?e[o]:e.touches[n][o]},t.getCurrentMatrix=function(e){var i=e.css(t.TRANSFORM_PROP);return i="none"!==i&&i?i:"matrix(1, 0, 0, 1, 0, 0)",{value:i.replace(/^.*\((.*)\)$/g,"$1").split(/, +/),is3d:-1!==i.indexOf("3d")}},t.getTranslate=function(e){var i=t.getCurrentMatrix(e);return{x:i.is3d?+i.value[12]:+i.value[4],y:i.is3d?+i.value[13]:+i.value[5]}},t.getScale=function(e){var i=t.getCurrentMatrix(e);return{x:+i.value[0],y:i.is3d?+i.value[5]:+i.value[3]}},t.jQueryfy=function(t){return"string"==typeof t||t instanceof HTMLElement||t instanceof NodeList||t instanceof HTMLCollection?e(t):"object"==typeof t?t.jquery?t:e(t):e([null])},t.BEM_BLOCK="mj-gallery",t.BEM=function(e,i){return t.BEM_BLOCK+(e?"__"+e:"")+(i?"--"+i:"")},t.CLASS={self:t.BEM(),selfActive:t.BEM(null,"active"),selfInfoActive:t.BEM(null,"info-active"),selfItemInfoActive:t.BEM(null,"item-info-active"),selfWhite:t.BEM(null,"white"),selfKeyboardFocus:t.BEM(null,"keyboard-focus"),selfGrabbing:t.BEM(null,"grabbing"),selfUIHidden:t.BEM(null,"ui-hidden"),overlay:t.BEM("overlay"),info:t.BEM("info"),infoNoContent:t.BEM("info","no-content"),title:t.BEM("title"),position:t.BEM("position"),positionCurrent:t.BEM("current"),positionTotal:t.BEM("total"),ui:t.BEM("ui"),controller:t.BEM("controller"),controllerToolbar:t.BEM("controller-toolbar"),btn:t.BEM("btn"),btnHidden:t.BEM("btn","hidden"),btnClose:t.BEM("close"),btnToggleInfo:t.BEM("toggle-info"),btnToggleZoom:t.BEM("toggle-zoom"),btnToggleZoomActive:t.BEM("toggle-zoom","active"),btnFullscreen:t.BEM("fullscreen"),btnFullscreenActive:t.BEM("fullscreen","active"),arrows:t.BEM("arrows"),arrow:t.BEM("arrow"),arrowLeft:t.BEM("arrow","left"),arrowRight:t.BEM("arrow","right"),arrowHidden:t.BEM("arrow","hidden"),arrowRepeat:t.BEM("arrow","repeat"),items:t.BEM("items"),item:t.BEM("item"),itemImage:t.BEM("item","image"),itemIframe:t.BEM("item","iframe"),itemYoutube:t.BEM("item","youtube"),itemVimeo:t.BEM("item","vimeo"),itemHtml:t.BEM("item","html"),itemVideo:t.BEM("item","video"),itemCurrent:t.BEM("item","current"),itemPrev:t.BEM("item","prev"),itemNext:t.BEM("item","next"),itemAnim:t.BEM("item","anim"),itemLoaded:t.BEM("item","loaded"),itemFullSize:t.BEM("item","full-size"),itemObjectFitCover:t.BEM("item","object-fit-cover"),itemClosingUp:t.BEM("item","closing-up"),itemClosingDown:t.BEM("item","closing-down"),itemClosingScale:t.BEM("item","closing-scale"),itemEdgeAnimRight:t.BEM("item","edge-anim-right"),itemEdgeAnimLeft:t.BEM("item","edge-anim-left"),view:t.BEM("view"),zoom:t.BEM("zoom"),zoomZoomable:t.BEM("zoom","zoomable"),draggable:t.BEM("draggable"),loader:t.BEM("loader"),itemContent:t.BEM("item-content"),itemHtmlContentWrapper:t.BEM("html-item-content-wrapper"),itemHtmlContentCenter:t.BEM("html-item-content-center"),image:t.BEM("item-content","image"),iframe:t.BEM("item-content","iframe"),youtube:t.BEM("item-content","youtube"),vimeo:t.BEM("item-content","vimeo"),
html:t.BEM("item-content","html"),video:t.BEM("item-content","video"),itemInfoWrapper:t.BEM("item-info-wrapper"),itemInfo:t.BEM("item-info"),itemInfoNoContent:t.BEM("item-info","no-content"),itemInfoContent:t.BEM("item-info-content"),itemInfoTitle:t.BEM("item-title"),itemInfoDescription:t.BEM("item-description"),hideScrollbars:t.BEM("hide-scrollbars"),hideScrollbarsPadding:t.BEM("hide-scrollbars","padding"),hideScrollbarsMargin:t.BEM("hide-scrollbars","margin"),hideScrollbarsOverflow:t.BEM("hide-scrollbars","overflow"),selector:function(t){return"."+this[t]}},t.DATA_PREFIX="mjg-",t.DATA={itemContentIsRemoving:"item-content-is-removing",itemTitle:t.DATA_PREFIX+"title",itemDescription:t.DATA_PREFIX+"description",action:t.DATA_PREFIX+"action",itemsSelector:t.DATA_PREFIX+"selector",openingSelector:t.DATA_PREFIX+"open",viewMaxWidth:t.DATA_PREFIX+"view-width",viewMaxHeight:t.DATA_PREFIX+"view-height",itemMaxWidth:t.DATA_PREFIX+"max-width",itemMaxHeight:t.DATA_PREFIX+"max-height",itemMinWidth:t.DATA_PREFIX+"min-width",itemMinHeight:t.DATA_PREFIX+"min-height",type:t.DATA_PREFIX+"type",events:t.DATA_PREFIX+"events",src:t.DATA_PREFIX+"src",srcset:t.DATA_PREFIX+"srcset",sizes:t.DATA_PREFIX+"sizes",method:t.DATA_PREFIX+"method",autoplay:t.DATA_PREFIX+"autoplay",zoomable:t.DATA_PREFIX+"zoomable",fullSize:t.DATA_PREFIX+"full-size",objectFitCover:t.DATA_PREFIX+"cover",scrollable:t.DATA_PREFIX+"scrollable",attr:function(t){return"data-"+this[t]},selector:function(t,e){return"["+this.attr(t)+(void 0!==e?"='"+e+"'":"")+"]"}},t.EVENT={zoom:"zoom",event:"event",youtubeReady:"youtubeready",vimeoReady:"vimeoready",videoReady:"videoready",load:"load",beforeDestroy:"beforedestroy",afterDestroy:"afterdestroy",afterRefresh:"afterrefresh",beforeRefresh:"beforerefresh",construct:"construct",init:"init",change:"change",beforeChange:"beforechange",afterChange:"afterchange",resize:"resize",open:"open",beforeOpen:"beforeopen",beforeFirstOpen:"beforefirstopen",beforeClose:"beforeclose",afterOpen:"afteropen",afterClose:"afterclose",close:"close",currentItemChanged:"currentitemchanged"},function(){var i={};t.EVENT.on=function(t,e,s){var n=s.getId();i[n]=i[n]||{},i[n][t]=i[n][t]||[],i[n][t].push(e)},t.EVENT.off=function(t,e,s){var n=s.getId();if(!e)return t?void delete i[n][t]:void delete i[n];i[n]&&i[n][t]&&(i[n][t]=i[n][t].filter(function(t){return e!==t}))},t.EVENT.fire=function(e,s,n){s=s||new t.EVENT.Event({},n);var o=n.getId();i[o]&&i[o][e]&&i[o][e].forEach(function(t){!1===t.call(n.getAPI(),s)&&s.preventDefault()})},t.EVENT.Event=function(t,i){var s=!1;t=t||{},t.mjGallery=i.getAPI(),t.preventDefault=function(){s=!0},t.isDefaultPrevented=function(){return s},e.extend(this,t)}}()}(window.mjGallery,jQuery),function(t,e){t.TEMPLATE={ITEM_INFO_CONTENT:function(e){e=e||{};var i=[];return e.title&&i.push('<h3 class="'+t.CLASS.itemInfoTitle+'">',e.title,"</h3>"),e.description&&i.push('<p class="'+t.CLASS.itemInfoDescription+'">',e.description,"</p>"),['<div class="'+t.CLASS.itemInfoContent+'">',i.join(""),"</div>"].join("")},POSITION:function(e,i){return['<div class="'+t.CLASS.position+'">','<span class="'+t.CLASS.positionCurrent+'">'+e+"</span>","/",'<span class="'+t.CLASS.positionTotal+'">'+i+"</span>","</div>"].join("")},ITEM:{SELF:function(e){return e=e||{},['<li class="'+t.CLASS.item+" "+t.BEM("item",e.type)+" "+(e.loaded?t.CLASS.itemLoaded:"")+" "+(e.fullSize?t.CLASS.itemFullSize:"")+" "+(e.objectFitCover?t.CLASS.itemObjectFitCover:"")+'">','<div class="'+t.CLASS.loader+'">','<div class="inner"></div>',"</div>",'<div class="'+t.CLASS.zoom+" "+(e.zoomable?t.CLASS.zoomZoomable:"")+'">','<div class="'+t.CLASS.view+'">',"</div>","</div>","</li>"].join("")},CONTENT:{}},ICON:{SELF:function(t,e){return['<span class="mj-gallery__icon '+(e?"mj-gallery__icon--"+e:"")+'">','<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">',t,"</svg>","</span>"].join("")},CLOSE:function(){return t.TEMPLATE.ICON.SELF('<path d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"/>')},ZOOM_IN:function(){return t.TEMPLATE.ICON.SELF('<path d="M13 10h-3v3h-2v-3h-3v-2h3v-3h2v3h3v2zm8.172 14l-7.387-7.387c-1.388.874-3.024 1.387-4.785 1.387-4.971 0-9-4.029-9-9s4.029-9 9-9 9 4.029 9 9c0 1.761-.514 3.398-1.387 4.785l7.387 7.387-2.828 2.828zm-12.172-8c3.859 0 7-3.14 7-7s-3.141-7-7-7-7 3.14-7 7 3.141 7 7 7z"/>',"in")},ZOOM_OUT:function(){return t.TEMPLATE.ICON.SELF('<path d="M13 10h-8v-2h8v2zm8.172 14l-7.387-7.387c-1.388.874-3.024 1.387-4.785 1.387-4.971 0-9-4.029-9-9s4.029-9 9-9 9 4.029 9 9c0 1.761-.514 3.398-1.387 4.785l7.387 7.387-2.828 2.828zm-12.172-8c3.859 0 7-3.14 7-7s-3.141-7-7-7-7 3.14-7 7 3.141 7 7 7z"/>',"out")},INFO:function(){return t.TEMPLATE.ICON.SELF('<path d="M24 17.981h-13l-7 5.02v-5.02h-4v-16.981h24v16.981zm-2-14.981h-20v12.981h4v3.125l4.357-3.125h11.643v-12.981zm-9 6.001v5h-2v-5h2zm-1-1.5c.69 0 1.25-.56 1.25-1.25s-.56-1.25-1.25-1.25-1.25.56-1.25 1.25.56 1.25 1.25 1.25z"/>')},FULLSCREEN_ON:function(){return t.TEMPLATE.ICON.SELF('<path d="M24 9h-2v-4h-4v-2h6v6zm-6 12v-2h4v-4h2v6h-6zm-18-6h2v4h4v2h-6v-6zm6-12v2h-4v4h-2v-6h6z"/>',"on")},FULLSCREEN_OFF:function(){return t.TEMPLATE.ICON.SELF('<path d="M18 3h2v4h4v2h-6v-6zm6 12v2h-4v4h-2v-6h6zm-18 6h-2v-4h-4v-2h6v6zm-6-12v-2h4v-4h2v6h-6z"/>',"off")},ARROW_LEFT:function(){return t.TEMPLATE.ICON.SELF('<path d="M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"/>',"arrow")},ARROW_RIGHT:function(){return t.TEMPLATE.ICON.SELF('<path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"/>',"arrow")},ARROW_START:function(){return t.TEMPLATE.ICON.SELF('<path d="M18.885 3.515c-4.617-4.618-12.056-4.676-16.756-.195l-2.129-2.258v7.938h7.484l-2.066-2.191c2.82-2.706 7.297-2.676 10.073.1 4.341 4.341 1.737 12.291-5.491 12.291v4.8c3.708 0 6.614-1.244 8.885-3.515 4.686-4.686 4.686-12.284 0-16.97z"/>',"repeat")},ARROW_END:function(){return t.TEMPLATE.ICON.SELF('<path d="M5.115 3.515c4.617-4.618 12.056-4.676 16.756-.195l2.129-2.258v7.938h-7.484l2.066-2.191c-2.82-2.706-7.297-2.676-10.073.1-4.341 4.341-1.737 12.291 5.491 12.291v4.8c-3.708 0-6.614-1.244-8.885-3.515-4.686-4.686-4.686-12.284 0-16.97z"/>',"repeat")}},BUTTON:function(e,i,s){return'<button type="button" class="'+i+" "+t.CLASS.btn+'" data-mjg-action="'+e+'">'+s+"</button>"},SELF:function(e){return e=e||{},['<div class="'+t.CLASS.self+'">','<div class="'+t.CLASS.overlay+'"></div>','<div class="'+t.CLASS.ui+'">','<div class="'+t.CLASS.info+'">',"</div>",'<div class="'+t.CLASS.controller+'">','<div class="'+t.CLASS.controllerToolbar+'">',e.closeBtn?t.TEMPLATE.BUTTON("close",t.CLASS.btnClose,t.TEMPLATE.ICON.CLOSE()):"",e.infoBtn?t.TEMPLATE.BUTTON("toggleInfo",t.CLASS.btnToggleInfo,t.TEMPLATE.ICON.INFO()):"",e.zoomBtn?t.TEMPLATE.BUTTON("toggleZoom",t.CLASS.btnToggleZoom,t.TEMPLATE.ICON.ZOOM_IN()+t.TEMPLATE.ICON.ZOOM_OUT()):"",e.fullscreenBtn?t.TEMPLATE.BUTTON("fullscreen",t.CLASS.btnFullscreen,t.TEMPLATE.ICON.FULLSCREEN_ON()+t.TEMPLATE.ICON.FULLSCREEN_OFF()):"","</div>",'<div class="'+t.CLASS.arrows+'">',t.TEMPLATE.BUTTON("prev",[t.CLASS.arrow,t.CLASS.arrowLeft].join(" "),t.TEMPLATE.ICON.ARROW_LEFT()+t.TEMPLATE.ICON.ARROW_END()),t.TEMPLATE.BUTTON("next",[t.CLASS.arrow,t.CLASS.arrowRight].join(" "),t.TEMPLATE.ICON.ARROW_RIGHT()+t.TEMPLATE.ICON.ARROW_START()),"</div>","</div>","</div>",'<ul class="'+t.CLASS.items+'">',"</ul>",'<div class="'+t.CLASS.itemInfoWrapper+'">','<div class="'+t.CLASS.itemInfo+" "+t.CLASS.itemInfoNoContent+'">',"</div>","</div>","</div>"].join("")}}}(window.mjGallery,jQuery),function(t,e){var i=function(e){this.current=e.item,this.mjGallery.getOption(t.OPTIONS.SHOW_POSITION)&&this.$positionCurrent.text(e.index+1),this.showItemInfo()},s=function(){this.$position=e(t.TEMPLATE.POSITION(this.mjGallery.getCurrentPosition(),this.mjGallery.getTotalCount())),this.$info.append(this.$position),this.$positionCurrent=this.$position.find(t.CLASS.selector("positionCurrent")),this.$positionTotal=this.$position.find(t.CLASS.selector("positionTotal"))},n=function(e){this.current=e.current,this.$itemInfo.append(t.TEMPLATE.ITEM_INFO_CONTENT()),this.mjGallery.getOption(t.OPTIONS.SHOW_POSITION)&&s.call(this),this.mjGallery.getOption(t.OPTIONS.SHOW_INFO)&&this.showInfo(),this.showItemInfo(),this.mjGallery.getOption(t.OPTIONS.SHOW_POSITION)||this.$info.addClass(t.CLASS.infoNoContent),t.EVENT.on(t.EVENT.currentItemChanged,i.bind(this),this.mjGallery)},o=function(){t.EVENT.on(t.EVENT.beforeFirstOpen,n.bind(this),this.mjGallery),t.EVENT.on(t.EVENT.beforeClose,function(){this.currentContent=null,this.currentContentFromItem=null}.bind(this),this.mjGallery)},r=function(e){e.show().stop().animate({marginTop:0},250,t.JS_EASING,function(){e.stop().animate({opacity:1},250,t.JS_EASING)})},h=function(i){var s=e(t.TEMPLATE.ITEM_INFO_CONTENT(i)),n=this.$itemInfo.hasClass(t.CLASS.itemInfoNoContent);if(this.$itemInfo.append(s).removeClass(t.CLASS.itemInfoNoContent),s.css({opacity:0,marginTop:-s.outerHeight(!0)}).hide(),!t.USE_TRANSITIONS&&n){var o={textIndent:1};this.$itemInfo.css(o).stop().animate({textIndent:0},{duration:t.DEF_DURATION,easing:t.JS_EASING,step:function(e){var i={};i[t.TRANSFORM_PROP]=t.getTransformValue({translate:[0,100*e+"%"]}),this.$itemInfo.css(i)}.bind(this),done:function(){var e={};e[t.TRANSFORM_PROP]="",this.$itemInfo.css(e)}.bind(this)})}return s},l=function(e,i,s){var n=e.filter(function(e,i){return!t.$t(i).data(this.mjGallery.withNS(t.DATA.itemContentIsRemoving))}.bind(this));n.stop().data(this.mjGallery.withNS(t.DATA.itemContentIsRemoving),!0).animate({opacity:0},250,t.JS_EASING,function(){if(n.animate({height:0},250,t.JS_EASING,function(){n.remove()}),!s&&i&&!i.data(this.mjGallery.withNS(t.DATA.itemContentIsRemoving)))return void r.call(this,i);if(!i&&(this.$itemInfo.addClass(t.CLASS.itemInfoNoContent),!t.USE_TRANSITIONS)){var e={textIndent:0};this.$itemInfo.css(e).stop().animate({textIndent:1},{duration:t.DEF_DURATION,easing:t.JS_EASING,step:function(e){var i={};i[t.TRANSFORM_PROP]=t.getTransformValue({translate:[0,100*e+"%"]}),this.$itemInfo.css(i)}.bind(this),done:function(){var e={};e[t.TRANSFORM_PROP]="",this.$itemInfo.css(e)}.bind(this)})}}.bind(this))},a=t.InfoController=function(e){this.mjGallery=e,this.$mjg=e.get(),this.$itemInfo=this.$mjg.find(t.CLASS.selector("itemInfo")),this.$info=this.$mjg.find(t.CLASS.selector("info")),this.current=null,o.call(this)};a.prototype.get=function(){return this.$info},a.prototype.hideItemInfoContent=function(e){var i=this.$itemInfo.find(t.CLASS.selector("itemInfoContent"));return e?(i.empty(),this):(l.call(this,i,null),this)},a.prototype.getItemInfo=function(t){var e=t.getTitle(),i=t.getDescription();return e||i?{title:e,description:i}:null},a.prototype.hasInfoChanged=function(t){return!t||!this.currentContent||this.current!==this.currentContentFromItem||(t.description!==this.currentContent.description||t.title!==this.currentContent.title)},a.prototype.showItemInfo=function(){var e=this.getItemInfo(this.current);if(this.hasInfoChanged(e)){this.currentContent=e,this.currentContentFromItem=this.current;var i=this.$itemInfo.find(t.CLASS.selector("itemInfoContent")),s=null,n=this.$itemInfo.hasClass(t.CLASS.itemInfoNoContent);!e&&n||(e&&(s=h.call(this,e),n&&r.call(this,s)),l.call(this,i,s,n))}},a.prototype.hasInfo=function(){return Boolean(this.getItemInfo(this.current))||!this.$info.hasClass(t.CLASS.infoNoContent)},a.prototype.toggleInfo=function(){return this.$mjg.toggleClass(t.CLASS.selfInfoActive),this},a.prototype.showInfo=function(){return this.$mjg.addClass(t.CLASS.selfInfoActive),this},a.prototype.hideInfo=function(){return this.$mjg.removeClass(t.CLASS.selfInfoActive),this}}(window.mjGallery,jQuery),function(t,e){var i=t.ItemsGenerator=function(e,i){this.options=i,this.mjGallery=e,this.$itemsList=this.mjGallery.getItemsList(),this.emptyItem=new t.Item(null,this.mjGallery),this.items=null},s=function(t){if(t.length!==this.$sources.length)return!0;var e=t.toArray();return this.$sources.toArray().some(function(t){return!~e.indexOf(t)})},n=function(){this.items&&this.items.length&&this.items.forEach(function(t){t.destroy()}),this.items=[],this.$sources.get().forEach(function(i,s){var n=e(i),o=t.Item.getClass(n);this.items.push(new o(n,this.mjGallery,s))},this)},o=function(t){var e=0;this.items.some(function(i,s){if(i.$source[0]===t)return e=s,!0},this),this.currentItem=this.items[e]||this.emptyItem,this.totalCount>1&&(this.nextItem=this.items[e+1],this.prevItem=this.items[e-1],this.totalCount>2&&!this.prevItem&&(this.prevItem=this.items[this.totalCount-1]),this.totalCount>2&&!this.nextItem&&(this.nextItem=this.items[0])),this.nextItem=this.nextItem||this.emptyItem,this.prevItem=this.prevItem||this.emptyItem,this.nextItem.setAsNext(),this.prevItem.setAsPrev(),this.currentItem.setAsCurrent()},r=function(e){return this.$sources.filter(function(){return t.$t(this).is(e)})[0]},h=function(e){return this.$sources.filter(function(){return this.href===e||this.src===e||this.getAttribute(t.DATA.attr("src"))===e||e.match(new RegExp(this.getAttribute(t.DATA.attr("src"))+"$"))})[0]},l=function(e){return this.$sources.filter(function(){return this.href===e||this.src===e||this.getAttribute(t.DATA.attr("src"))===e||e.match(new RegExp(this.href+"$"))||e.match(new RegExp(this.src+"$"))})[0]};i.prototype.generate=function(i){var a,u=this.$sources,c=i,m=this.mjGallery.getOpeningElement();if(m&&~m.toArray().indexOf(i)&&(a=m.data(t.DATA.itemsSelector)||this.options.getOriginal(t.OPTIONS.ITEMS_SELECTOR),i=a?e(a)[0]:i,a=a||m&&m.get()),this.options.get(t.OPTIONS.GALLERY_MODE)?this.$sources=e(a||this.options.get(t.OPTIONS.ITEMS_SELECTOR)):this.$sources=e(i),m&&~m.toArray().indexOf(c)){var f=e(c).attr(t.DATA.attr("openingSelector"));if(f)i=r.call(this,f)||i;else if(c.href)i=h.call(this,c.href)||i;else if(c.getAttribute(t.DATA.attr("src"))){var p=c.getAttribute(t.DATA.attr("src"));i=l.call(this,p)||i}}return!this.items||!u||this.options.get(t.OPTIONS.ALWAYS_REFRESH_ITEMS)||s.call(this,u)?(this.$itemsList.empty(),n.call(this),this.totalCount=this.items.length,this.$items=this.$itemsList.find(t.CLASS.selector("item"))):this.items.forEach(function(t){t.clearState()}),o.call(this,i),this.items},i.prototype.getTotalCount=function(){return this.totalCount||0},i.prototype.getEmptyItem=function(){return this.emptyItem},i.prototype.getPrevItem=function(){return this.prevItem},i.prototype.getNextItem=function(){return this.nextItem},i.prototype.getCurrentItem=function(){return this.currentItem}}(window.mjGallery,jQuery),function(t,e){var i={},s=t.Options=function(t,s){this.mjGallery=s,this.originalOptions=t,this.options=e.extend({},i,t)};t.OPTIONS={FULL_SIZE_ITEMS:"fullSize",CONTENT_OBJECT_FIT_COVER:"cover",WHITE_UI:"white",AUTO_HIDE_UI:"autoHide",OVERLAY_OPACITY:"overlay",SHOW_INFO:"info",SHOW_POSITION:"counter",OPENING_ELEMENT:"openBy",ITEMS_SELECTOR:"selector",ITEM_TITLE_SELECTOR:"title",ITEM_DESCRIPTION_SELECTOR:"description",CUSTOM_CLASS:"addClass",GALLERY_MODE:"gallery",ALWAYS_REFRESH_ITEMS:"alwaysRefresh",SCROLLBARS_VISIBILITY:"scrollbars",VIEW_MAX_WIDTH:"viewWidth",VIEW_MAX_HEIGHT:"viewHeight",MAX_CONTENT_WIDTH:"maxWidth",MIN_CONTENT_WIDTH:"minWidth",MAX_CONTENT_HEIGHT:"maxHeight",MIN_CONTENT_HEIGHT:"minHeight",AUTOPLAY_VIDEO:"autoplay",PRESERVE_EVENTS:"events",HTML_GENERATOR:"html",HTML_GENERATE_METHOD:"method",ZOOMABLE:"zoomable",SHOW_BTN_ZOOM:"zoomBtn",SHOW_BTN_INFO:"infoBtn",SHOW_BTN_FULLSCREEN:"fullscreenBtn",SHOW_BTN_CLOSE:"closeBtn"},t.SCROLLBARS={VISIBLE:"visible",MARGIN:"margin",PADDING:"padding",OVERFLOW:"overflow"},t.EVENTS={ALL:"all",NONE:"none",SCROLL:"scroll",POINTER:"pointer",KEYS:"keys"},i[t.OPTIONS.FULL_SIZE_ITEMS]=!1,i[t.OPTIONS.CONTENT_OBJECT_FIT_COVER]=!1,i[t.OPTIONS.WHITE_UI]=!1,i[t.OPTIONS.AUTO_HIDE_UI]=!0,i[t.OPTIONS.OVERLAY_OPACITY]=.85,i[t.OPTIONS.SHOW_INFO]=!0,i[t.OPTIONS.SHOW_POSITION]=!0,i[t.OPTIONS.ITEMS_SELECTOR]="a:has(img)",i[t.OPTIONS.ITEM_TITLE_SELECTOR]=null,i[t.OPTIONS.ITEM_DESCRIPTION_SELECTOR]=null,i[t.OPTIONS.CUSTOM_CLASS]=null,i[t.OPTIONS.GALLERY_MODE]=!0,i[t.OPTIONS.OPENING_ELEMENT]=null,i[t.OPTIONS.ALWAYS_REFRESH_ITEMS]=!1,i[t.OPTIONS.SCROLLBARS_VISIBILITY]=t.SCROLLBARS.PADDING,i[t.OPTIONS.AUTOPLAY_VIDEO]=!1,i[t.OPTIONS.PRESERVE_EVENTS]=t.EVENTS.NONE,i[t.OPTIONS.ZOOMABLE]=!0,i[t.OPTIONS.SHOW_BTN_FULLSCREEN]=!0,i[t.OPTIONS.SHOW_BTN_INFO]=!0,i[t.OPTIONS.SHOW_BTN_ZOOM]=!0,i[t.OPTIONS.SHOW_BTN_CLOSE]=!0,s.prototype.init=function(){this.is(t.OPTIONS.GALLERY_MODE,!1)&&!this.byUserIs(t.OPTIONS.SHOW_POSITION,!0)&&this.set(t.OPTIONS.SHOW_POSITION,!1),this.is(t.OPTIONS.WHITE_UI,!0)&&this.mjGallery.get().addClass(t.CLASS.selfWhite),this.get(t.OPTIONS.CUSTOM_CLASS)&&this.mjGallery.get().addClass(this.get(t.OPTIONS.CUSTOM_CLASS)),this.mjGallery.contentSizes={maxWidth:this.get(t.OPTIONS.MAX_CONTENT_WIDTH),minWidth:this.get(t.OPTIONS.MIN_CONTENT_WIDTH),maxHeight:this.get(t.OPTIONS.MAX_CONTENT_HEIGHT),minHeight:this.get(t.OPTIONS.MIN_CONTENT_HEIGHT)},this.mjGallery.viewSizes={maxWidth:this.get(t.OPTIONS.VIEW_MAX_WIDTH),maxHeight:this.get(t.OPTIONS.VIEW_MAX_HEIGHT)}},s.prototype.getDefaults=function(){return i},s.prototype.isSetByUser=function(t){return void 0!==this.originalOptions[t]},s.prototype.isSet=function(t){return void 0!==this.options[t]},s.prototype.is=function(t,e){return this.options[t]===e},s.prototype.byUserIs=function(t,e){return this.originalOptions[t]===e},s.prototype.get=function(t){return t?this.options[t]:this.options},s.prototype.set=function(t,e){return this.options[t]=e,this},s.prototype.getOriginal=function(t){return t?this.originalOptions[t]:this.originalOptions}}(window.mjGallery,jQuery),function(t,e){var i=t.Pointer=function(){this.start={x:0,y:0},this.current={x:0,y:0},this.diff={x:0,y:0},this.diffHistory=[],this.startDiff={x:0,y:0},this._prev={x:0,y:0},this.prev={x:0,y:0},this.dist=0,this.pinch={dist:0,_prev:0,prev:0,diff:0,start:{0:{x:0,y:0},1:{x:0,y:0}},current:{0:{x:0,y:0},1:{x:0,y:0}},startDiff:0,startDist:0},this.count=0,this.moved=!1,this.type=null,this.event=null,this.dblTap=!1,this._lastDblTap=+new Date};i.FIX={HOR:1,VER:2},i.DIR={HOR:1,VER:2},i.TYPE={TOUCH:1,MOUSE:2},i.prototype.onStart=function(e){this.event=e;var s=t.getClientValue(e);if(e=e.originalEvent||e,this.count=e.touches?e.touches.length:1,"touchstart"===e.type)if(2===this.count)this.dblTap=!1;else{var n=+new Date;this.dblTap=n-this._lastDblTap<300&&Math.sqrt(Math.pow(this._prev.x-s.x,2)+Math.pow(this._prev.y-s.y,2))<20,this._lastDblTap=n}if(this.start.x=s.x,this.start.y=s.y,this.current.x=s.x,this.current.y=s.y,this._prev.x=this.current.x,this._prev.y=this.current.y,this.prev.x=0,this.prev.y=0,this.dist=0,this.diffHistory=[],this.pinch._prev=0,this.pinch.prev=0,this.pinch.diff=0,this.pinch.dist=0,this.pinch.startDiff=0,this.pinch.startDist=0,2===this.count){var o=t.getClientValue(e,1);this.pinch._prev=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),this.pinch.prev=0,this.pinch.start={0:{x:s.x,y:s.y},1:{x:o.x,y:o.y}},this.pinch.current={0:{x:s.x,y:s.y},1:{x:o.x,y:o.y}},this.pinch.startDist=this.pinch._prev}this.moved=!1,this.type=e.type.match(/mouse/)?i.TYPE.MOUSE:i.TYPE.TOUCH},i.prototype.onMove=function(e){this.event=e;var s=t.getClientValue(e);if(this.prev.x=this._prev.x,this.prev.y=this._prev.y,this.diff.x=s.x-this._prev.x,this.diff.y=s.y-this._prev.y,this.diffHistory=this.diffHistory.slice(0,2),this.diffHistory.unshift(this.diff),this.startDiff.x=s.x-this.start.x,this.startDiff.y=s.y-this.start.y,this._prev.x=this.current.x,this._prev.y=this.current.y,this.current.x=s.x,this.current.y=s.y,this.dist=Math.sqrt(Math.pow(this.diff.x,2)+Math.pow(this.diff.y,2)),e=e.originalEvent||e,this.count=e.touches?e.touches.length:1,2===this.count){this.pinch.prev=this.pinch._prev;var n=t.getClientValue(e,1);this.pinch.dist=Math.sqrt(Math.pow(n.x-s.x,2)+Math.pow(n.y-s.y,2)),this.pinch.diff=this.pinch.dist-this.pinch._prev,this.pinch.startDiff=this.pinch.dist-Math.sqrt(Math.pow(this.pinch.start[1].x-this.pinch.start[0].x,2)+Math.pow(this.pinch.start[1].y-this.pinch.start[0].y,2)),this.pinch.current={0:{x:s.x,y:s.y},1:{x:n.x,y:n.y}},this.pinch._prev=this.pinch.dist}this.moved=!0,this.type=e.type.match(/mouse/)?i.TYPE.MOUSE:i.TYPE.TOUCH},i.prototype.left=function(){return this.diff.x<1},i.prototype.right=function(){return this.diff.x>1},i.prototype.up=function(){return this.diff.y<1},i.prototype.down=function(){return this.diff.y>1},i.prototype.scaleDown=function(){return this.pinch.diff<=0},i.prototype.scaleUp=function(){return this.pinch.diff>0},i.prototype.dirX=function(){return this.right()&&1||-1},i.prototype.dirY=function(){return this.down()&&1||-1},i.prototype.dir=function(){return{x:this.dirX(),y:this.dirY()}},i.prototype.horFix=function(){return Math.abs(this.diff.x)>=Math.abs(this.diff.y)},i.prototype.verFix=function(){return Math.abs(this.diff.x)<Math.abs(this.diff.y)},i.prototype.dirFix=function(t){return t&&t.value?t.dir===i.DIR.VER?this.horFix()||Math.abs(this.diff.y/(this.diff.x||.1))<t.value?i.FIX.HOR:i.FIX.VER:this.horFix()||Math.abs(this.diff.x/(this.diff.y||.1))<t.value?i.FIX.HOR:i.FIX.VER:this.horFix()?i.FIX.HOR:i.FIX.VER},i.prototype.isMouse=function(){return this.type===i.TYPE.MOUSE},i.prototype.isTouch=function(){return this.type===i.TYPE.TOUCH},i.prototype.getDiff=function(){var t=0,e=0;return this.diffHistory.length&&(this.diffHistory.forEach(function(i){t+=i.x,e+=i.y}),t/=this.diffHistory.length,e/=this.diffHistory.length),{x:t,y:e}},i.prototype.absDiff=function(){return{x:Math.abs(this.diff.x),y:Math.abs(this.diff.y)}},i.prototype.absStartDiff=function(){return{x:Math.abs(this.startDiff.x),y:Math.abs(this.startDiff.y)}},i.prototype.getPinchMiddle=function(){return{x:(this.pinch.current[0].x+this.pinch.current[1].x)/2,y:(this.pinch.current[0].y+this.pinch.current[1].y)/2}},i.prototype.isDblTap=function(){return this.dblTap},i.prototype.realMove=function(){return 0!==this.diff.x||0!==this.diff.y}}(window.mjGallery,jQuery),function(t,e){var i="UIController",s=!1,n=!1,o=!1,r=null,h=0,l=!0,a={x:0,y:0},u=function(e){e&&0===h?(h=.3,this.$hidableUI.css(t.TRANSITION_PROP+"Delay",h+"s")):e||0===h||(h=0,this.$hidableUI.css(t.TRANSITION_PROP+"Delay",h+"s"))},c=function(e,i,s){u.call(this,s),e&&(l=!0,this.mjGallery.get().removeClass(t.CLASS.selfUIHidden)),clearTimeout(r),r=setTimeout(function(){var n=document.elementFromPoint(a.x,a.y);if(t.$t(n).closest(t.CLASS.selector("ui")+","+t.CLASS.selector("itemInfoWrapper")).length)return void c.call(this,e,"number"==typeof i?i:3e3,s);this.mjGallery.get().addClass(t.CLASS.selfUIHidden),l=!1}.bind(this),"number"==typeof i?i:3e3)},m=function(t){this.mjGallery.get().off(this.mjGallery.withNS(".onOverlay"+i));var e=this.mjGallery.getCurrentItem().considerEventAsOnOverlay(t);if(e&&t.stopPropagation(),t.type.match(/move/)&&e){if(this.mjGallery.get().off(this.mjGallery.withNS(".onOverlay"+i)),this.mjGallery.eventsActive)return;return!1}if(e&&!t.type.match(/move/)){if(!l&&this.mjGallery.getCurrentItem().stealsPointer&&t.type.match(/touch/))return c.call(this,!0,4e3,!1),!1;if(this.mjGallery.get().off(this.mjGallery.withNS(".onOverlay"+i)),this.mjGallery.close(),"touchend"===t.type)return!1}},f=function(e){if(e.type.match(/touch/))n=!0;else if(n)return n=!1,!1;if(s||this.mjGallery.ignoreEvents||e.type.match(/touch/)&&e.originalEvent.touches.length)return s=!1,void e.preventDefault();var i=t.$t(e.target).closest(t.DATA.selector("action"));if(i.length){return i.data(t.DATA.action).split(",").forEach(function(t){"function"==typeof this.mjGallery.getAPI()[t]?this.mjGallery.getAPI()[t]():"function"==typeof this.mjGallery[t]?this.mjGallery[t]():"function"==typeof this[t]&&this[t]()},this),!1}},p=function(e){var i;i="DOMMouseScroll"===e.type?e.originalEvent.detail>0?t.DIR.DOWN:t.DIR.UP:e.originalEvent.wheelDelta<0?t.DIR.DOWN:t.DIR.UP,this.mjGallery[i===t.DIR.DOWN?"next":"prev"]()},d=function(e){var i=~[38,39].indexOf(e.which)?t.DIR.DOWN:t.DIR.UP;this.mjGallery[i===t.DIR.DOWN?"next":"prev"]()},I=function(e){if(16===e.which&&(o=!1),!this.mjGallery.isClosed()){if(9===e.which)return void this.mjGallery.get().addClass(t.CLASS.selfKeyboardFocus);var i=this.mjGallery.getCurrentItem();if(27===e.which)return i.isZoomedIn()&&!i.shouldPreserveEvent(t.EVENTS.KEYS,e)?(this.mjGallery.toggleZoom(),!1):(this.mjGallery.close(),!1);if(!i.shouldPreserveEvent(t.EVENTS.KEYS,e))return~[107,109].indexOf(e.which)&&i.isZoomable()?(this.mjGallery[107===e.which?"zoomIn":"zoomOut"](),!1):~[37,38,39,40].indexOf(e.which)?i.isZoomedIn()?(this.mjGallery.ignoreEvents=!0,i.fitZoom(function(){this.mjGallery.ignoreEvents=!1}.bind(this)),!1):(d.call(this,e),!1):void 0}},y=function(e){if(16===e.which&&(o=!0),!this.mjGallery.isClosed()&&!this.mjGallery.getCurrentItem().shouldPreserveEvent(t.EVENTS.KEYS,e)){if(~[37,38,39,40].indexOf(e.which)){if(this.mjGallery.getCurrentItem().isZoomedIn()){var i=t.TRANTSLATE_ZOOM_STEP;this.mjGallery.getCurrentItem().translateZoomBy([37===e.which?i:39===e.which?-i:0,38===e.which?i:40===e.which?-i:0],1e3/60/1e3*2),this.mjGallery.ignoreEvents=!0}return!1}return(!this.mjGallery.getCurrentItem().isZoomable()||!~[107,109].indexOf(e.which))&&void 0}},S=function(){var e=this.mjGallery.getCurrentItem().getIframe();e&&e.length?e[0].focus():this.rightArrow?this[this.rightArrowRepeat?"$leftArrow":"$rightArrow"].focus():this.leftArrow?this[this.leftArrowRepeat?"$rightArrow":"$leftArrow"].focus():this.$closeBtn.focus(),t.EVENT.on(t.EVENT.afterChange,function(){this.mjGallery.getTotalCount()<2||(this.addFocusRight?(this.addFocusRight=!1,this.$rightArrow.focus()):this.addFocusLeft&&(this.addFocusLeft=!1,this.$leftArrow.focus()))}.bind(this),this.mjGallery)},T=function(e){var i,s=t.$t(e.target),n=s.closest(t.CLASS.selector("item")),r=this.mjGallery.getCurrentItem().get(),h=n.index(),l=r.index(),a=n.length&&n[0]!==r[0];if(!s.closest(t.CLASS.selector("self")).length||a)return(h>-1&&h<l&&!o||-1===h&&o)&&(i=r.find(t.FOCUSABLE)),i&&i.length||(i=this.$self.find(t.FOCUSABLE)),i[o?"last":"first"]().focus(),a&&this.mjGallery.resetScroll(),!1},E=function(e){if(this.mjGallery.isOpened()){if(e.type.match(/mouse/i)){if(this.mjGallery.getCurrentItem().shouldPreserveEvent(t.EVENTS.SCROLL,e)){var i=t.$t(e.target).closest(t.CLASS.selector("itemContent")),s=!!i.length;return s||p.call(this,e),s}p.call(this,e)}return!1}},g=function(e){this.$zoomBtn[e.zoomedIn?"addClass":"removeClass"](t.CLASS.btnToggleZoomActive)},v=function(e){if(l&&!this.mjGallery.pointer.moved&&!t.$t(e.target).closest(t.DATA.selector("action")).length)return c.call(this,!1,0,!1),!1},O=function(){var e=!1,s=!1;this.mjGallery.get().on(this.mjGallery.withNS("touchend."+i,"touchmove."+i),function(i){if(a={x:-1,y:-1},i.type.match(/move/))return void(e=!0);s=!0;var n=t.$t(i.target).closest(t.DATA.selector("action")).length;if(!e&&!n&&!t.$t(i.target).closest(t.FOCUSABLE).length)return c.call(this,!l,l?0:4e3,!0),void(e=!1);c.call(this,l,n?1e4:4e3,!0),e=!1}.bind(this)),this.mjGallery.get().on(this.mjGallery.withNS("mousemove."+i,"mouseout."+i),function(t){return s?void(s=!1):t.type.match(/move/)?(a.x=t.clientX,a.y=t.clientY,void c.call(this,!0,null,!1)):void(null!==t.toElement&&null!==t.relatedTarget||(a={x:-1,y:-1},c.call(this,!1,0,!1)))}.bind(this)),this.mjGallery.infoController.$info.on(this.mjGallery.withNS("touchend."+i),v.bind(this)),this.mjGallery.infoController.$itemInfo.on(this.mjGallery.withNS("touchend."+i),v.bind(this))},A=function(){this.infoController.get().on(this.mjGallery.withNS("touchmove."+i),function(){return!1}),this.infoController.$itemInfo.on(this.mjGallery.withNS("touchmove."+i),function(){return!1}),this.mjGallery.options.is(t.OPTIONS.AUTO_HIDE_UI,!0)&&O.call(this),t.$win.on(this.mjGallery.withNS("keyup."+i),I.bind(this)),t.$win.on(this.mjGallery.withNS("keydown."+i),y.bind(this)),t.$win.on(this.mjGallery.withNS("scroll."+i,"DOMMouseScroll."+i,"mousewheel."+i),E.bind(this)),t.$win.on(this.mjGallery.withNS("touchstart."+i,"mousedown."+i),function(){var e=[t.CLASS.selector("zoom"),t.CLASS.selector("view"),t.CLASS.selector("item"),t.CLASS.selector("html")].join(",");this.mjGallery.get().off(this.mjGallery.withNS(".onOverlay"+i)).one(this.mjGallery.withNS("click.onOverlay"+i,"touchend.onOverlay"+i,"touchmove.onOverlay"+i,"mousemove.onOverlay"+i),e,m.bind(this))}.bind(this)),t.$win.on(this.mjGallery.withNS("focusin."+i),T.bind(this)),this.mjGallery.get().on(this.mjGallery.withNS("click."+i,"touchend."+i),f.bind(this)),this.$self.on(this.mjGallery.withNS("touchmove."+i),function(){return s=!0,!1}),this.mjGallery.get().on(this.mjGallery.withNS("touchmove."+i),t.DATA.selector("action"),function(){s=!0}),this.internalEventsRegistred||(this.internalEventsRegistred=!0,t.EVENT.on(t.EVENT.afterOpen,S.bind(this),this.mjGallery),t.EVENT.on(t.EVENT.zoom,g.bind(this),this.mjGallery)),this.rightArrow||this.leftArrow||this.$closeBtn.focus()},C=function(){this.$self.off(this.mjGallery.withNS("touchmove."+i)),this.mjGallery.infoController.$info.off(this.mjGallery.withNS("touchend."+i)),this.mjGallery.infoController.$itemInfo.off(this.mjGallery.withNS("touchend."+i)),this.infoController.get().off(this.mjGallery.withNS("touchmove."+i)),this.infoController.$itemInfo.off(this.mjGallery.withNS("touchmove."+i)),t.$win.off(this.mjGallery.withNS("focusin."+i,"scroll."+i,"DOMMouseScroll."+i,"mousewheel."+i,"touchstart."+i,"mousedown."+i,"mousemove."+i,"keyup."+i,"keydown."+i)),this.mjGallery.get().off(this.mjGallery.withNS("click."+i,"touchend."+i,"touchmove."+i,"mousemove."+i,"mouseout."+i))},N=function(e,i,s){this["$"+e+"Arrow"][i?"removeClass":"addClass"](t.CLASS.arrowHidden),i||(this["$"+e+"Arrow"].blur(),this["addFocus"+("left"===e?"Right":"Left")]=!s),this[e+"Arrow"]=i,this["$"+e+"Arrow"][0].disabled=!i},P=function(e,i){this["$"+e+"Arrow"][i?"addClass":"removeClass"](t.CLASS.arrowRepeat),this[e+"ArrowRepeat"]=i},R=function(){var t=this.mjGallery.getTotalCount(),e=this.mjGallery.getCurrentIndex();1===t?(N.call(this,"left",!1,!0),N.call(this,"right",!1,!0)):2===t?(N.call(this,"left",0!==e,!0),N.call(this,"right",0===e,!0)):(P.call(this,"left",0===e),P.call(this,"right",e+1===t))},M=function(){this.$zoomBtn[this.mjGallery.getCurrentItem().isZoomable()?"removeClass":"addClass"](t.CLASS.btnHidden)},_=function(){this.$infoBtn[this.infoController.hasInfo()?"removeClass":"addClass"](t.CLASS.btnHidden)},b=function(){_.call(this),M.call(this),R.call(this),this.mjGallery.options.is(t.OPTIONS.AUTO_HIDE_UI,!0)&&c.call(this,!0)},w=function(){clearTimeout(this.addFocusToIframeTimeout)},L=function(){var t=this.mjGallery.getCurrentItem().getIframe();t&&t.length&&(this.addFocusToIframeTimeout=setTimeout(function(){t.focus()}.bind(this),0))},$=function(t){var e=this.mjGallery.getTotalCount();_.call(this),M.call(this),2===e?t.prev&&t.next?(N.call(this,"right",!0),N.call(this,"left",!0)):(N.call(this,"right",!t.prev),N.call(this,"left",!!t.prev)):e>2&&(P.call(this,"left",0===t.currentIndex),P.call(this,"right",t.currentIndex+1===e))},x=t.UIController=function(e,i){this.internalEventsRegistred=!1,this.mjGallery=e,this.infoController=i,this.$self=this.mjGallery.get().find(t.CLASS.selector("controller")),this.$closeBtn=this.mjGallery.get().find(t.CLASS.selector("btnClose")),this.$zoomBtn=this.mjGallery.get().find(t.CLASS.selector("btnToggleZoom")),this.$fullscreenBtn=this.mjGallery.get().find(t.CLASS.selector("btnFullscreen")),this.$infoBtn=this.mjGallery.get().find(t.CLASS.selector("btnToggleInfo")),this.$hidableUI=this.mjGallery.get().find(t.CLASS.selector("ui")+", "+t.CLASS.selector("itemInfoWrapper")),this.$leftArrow=this.$self.find(t.CLASS.selector("arrowLeft")),this.$rightArrow=this.$self.find(t.CLASS.selector("arrowRight")),this.leftArrow=this.rightArrow=!0,t.EVENT.on(t.EVENT.beforeOpen,b.bind(this),e),t.EVENT.on(t.EVENT.beforeChange,w.bind(this),this.mjGallery),t.EVENT.on(t.EVENT.change,$.bind(this),this.mjGallery),t.EVENT.on(t.EVENT.afterChange,L.bind(this),this.mjGallery),t.EVENT.on(t.EVENT.open,A.bind(this),this.mjGallery),
t.EVENT.on(t.EVENT.beforeClose,C.bind(this),this.mjGallery),t.EVENT.on(t.EVENT.beforeDestroy,C.bind(this),this.mjGallery)};x.prototype.fullscreen=function(e){return this.mjGallery.get()&&t.SUPPORTS_FULLSCREEN&&(this.$fullscreenBtn.hasClass(t.CLASS.btnFullscreenActive)||!1===e?document[t.EXIT_FULLSCREEN_FN]&&!0!==e&&(document[t.EXIT_FULLSCREEN_FN](),this.$fullscreenBtn.removeClass(t.CLASS.btnFullscreenActive)):(this.mjGallery.get()[0][t.REQUEST_FULLSCREEN_FN](),this.$fullscreenBtn.addClass(t.CLASS.btnFullscreenActive))),this},x.prototype.toggleInfo=function(){return this.infoController.toggleInfo(),this},x.prototype.showInfo=function(){return this.infoController.showInfo(),this},x.prototype.hideInfo=function(){return this.infoController.hideInfo(),this}}(window.mjGallery,jQuery),function(t,e){var i=t.ItemTransformationController=function(e,i){if(this.constructor===t.ItemTransformationController)throw"ItemTransformationController is an abstract class!";this.mjGallery=i,this.item=e,this.zoomValue=1,this.$zoom=e.getZoom()};i.prototype.getZoomRect=function(){return this.$zoom[0].getBoundingClientRect()},i.prototype.getContentRect=function(){return this.item.getContent()[0].getBoundingClientRect()},i.prototype.prepareFitZoom=function(){if(1===this.zoomValue)return null;var e=this.calcFitZoomTranslate(),i=t.getTranslate(this.$zoom),s={};return i.x===e[0]&&i.y===e[1]?null:(s[t.TRANSITION_PROP+"Duration"]="",s[t.TRANSITION_PROP]="",s[t.TRANSFORM_PROP]=t.getTransformValue({translate:e,scale:[this.zoomValue]}),{CSS:s,translate:e,currentTranslate:i})},i.prototype.fitZoom=function(){throw"Implement fitZoom!"},i.prototype.calcFitZoomTranslate=function(){var e=this.getContentRect(),i=this.getZoomRect(),s=t.getTranslate(this.$zoom),n=[],o=(i.width-this.item.width)/-2-i.left,r=(i.height-this.item.height)/-2-i.top;if(e.width<this.item.width-this.item.gap)n.push(o+s.x-this.item.gap/2);else if(e.left>0||e.right<this.item.width-this.item.gap){var h=(this.item.width-e.width)/2;e.left>0?h*=-1:e.right<this.item.width-this.item.gap&&(h-=this.item.gap),n.push(o+h+s.x)}else n.push(s.x);if(e.height<this.item.height)n.push(r+s.y);else if(e.top>0||e.bottom<this.item.height){var l=(this.item.height-e.height)/2;e.top>0&&(l*=-1),n.push(r+l+s.y)}else n.push(s.y);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n},i.prototype.setOrigin=function(e){var i={},s=t.getTranslate(this.$zoom),n=[s.x,s.y],o=null;return this.isZoomedIn()&&(i[t.TRANSFORM_PROP]=t.getTransformValue({translate:n,scale:[this.zoomValue]}),o=this.$zoom.offset()),i[t.TRANSITION_PROP+"Duration"]="none",i[t.TRANSITION_PROP]="none",i[t.TRANSFORM_PROP+"Origin"]=e.x+"% "+e.y+"%",this.$zoom.stop().css(i),this.isZoomedIn()&&this.$zoom.offset(o),this},i.prototype.isZoomedIn=function(){return this.item.isZoomable()&&this.zoomValue>1},i.prototype.zoomAnim=function(){throw"Implement zoomAnim!"},i.prototype.zoom=function(e,i,s,n,o){if(void 0!==e){if(this.item.isZoomable()){clearTimeout(this.zoomAnimTimeout),this.$zoom.off(this.mjGallery.withNS(t.TRANSITIONEND+".zoom")),i=void 0===i?{x:50,y:50}:i;var r={},h=t.getTranslate(this.$zoom),l=[h.x,h.y];if(r[t.TRANSITION_PROP]="none",r[t.TRANSITION_PROP+"Duration"]="none",i&&this.setOrigin(i),s){if(n){var a={};a[t.TRANSFORM_PROP]=t.getTransformValue({translate:l,scale:[e]}),this.$zoom.css(a)}var u=n?this.calcFitZoomTranslate():l;if(r[t.TRANSFORM_PROP]=t.getTransformValue({translate:u,scale:[e]}),n){var c={};c[t.TRANSFORM_PROP]=t.getTransformValue({translate:l,scale:[this.zoomValue]}),this.$zoom.css(c)}this.zoomAnimTimeout=setTimeout(this.zoomAnim.bind(this,r,e,s,l,u,o),35)}else{r[t.TRANSFORM_PROP]=t.getTransformValue({translate:l,scale:[e]}),this.$zoom.css(r),o&&o.call(this.item);var m=new t.EVENT.Event({current:this.item.getAPI(),zoom:e,zoomedIn:e>1},this.mjGallery);t.EVENT.fire(t.EVENT.zoom,m,this.mjGallery)}this.zoomValue=e}return this}return this.zoomValue},i.prototype.translateZoomBy=function(e,i,s){var n={},o=[],r=this.getContentRect(),h=this.getZoomRect(),l=t.getTranslate(this.$zoom),a=t.GET_MAX_MOVE_OVER(),u=a,c=e[0],m=e[1],f=m<0,p=c>0,d=!1,I=!1;if(r.width<=this.item.width-this.item.gap){var y=h.left+h.right-this.item.width+this.item.gap;p||(y*=-1),y>0&&(c*=1-Math.min(a,Math.abs(y))/a,d=!0)}else(r.left>0&&p||r.right<this.item.width-this.item.gap&&!p)&&(c*=1-Math.min(a,Math.abs(p?r.left:r.right-this.item.width-this.item.gap/2))/a,d=!0);if(o[0]=l.x+c,r.height<=this.item.height){var S=h.top+h.bottom-this.item.height;f&&(S*=-1),S>0&&(m*=1-Math.min(u,Math.abs(S))/u,I=!0)}else(r.top>0&&!f||r.bottom<this.item.height&&f)&&(m*=1-Math.min(u,Math.abs(f?r.bottom-this.item.height:r.top))/u,I=!0);return o[1]=l.y+m,n[t.TRANSITION_PROP]=i?t.TRANSFORM_PREFIX+"transform linear":"none",n[t.TRANSITION_PROP+"Duration"]=i?i+"s":"none",n[t.TRANSFORM_PROP]=t.getTransformValue({translate:o,scale:[this.zoomValue]}),this.stopJQAnimIfTranslated&&!this.translateZoomByCalledBySlideZoom&&this.$zoom.stop(),this.$zoom.css(n),s?{x:c,y:m,edge:d&&I}:this},i.prototype.slideZoom=function(e,i){var s={textIndent:0},n=this.getContentRect(),o=e[0],r=e[1],h=t.GET_MAX_MOVE_OVER(),l=3*o*Math.max(1,Math.abs(o/100)),a=3*r*Math.max(1,Math.abs(r/100)),u=0,c=0;l=Math.min(Math.abs(l),Math.abs(n.width-(o>0?n.right:-n.left+this.item.width-this.item.gap)+h)),a=Math.min(Math.abs(a),Math.abs(n.height-(r>0?n.bottom:-n.top+this.item.height)+h));var m=Math.abs(l>a?l:a);m=Math.max(t.MIN_DURATION/1.5,Math.min(m,t.MAX_DURATION/1.5)),l*=o<0?-1:1,a*=r<0?-1:1,this.stopJQAnimIfTranslated=!0,this.$zoom.stop().css(s).animate({textIndent:1},{duration:m,easing:"easeOutQuart",step:function(t){var e=Math.abs(l)*t-Math.abs(u),s=Math.abs(a)*t-Math.abs(c);e*=o<0?-1:1,s*=r<0?-1:1,this.translateZoomByCalledBySlideZoom=!0;var n=this.translateZoomBy([e,s],null,!0);this.translateZoomByCalledBySlideZoom=!1,u+=e,c+=s,n.edge&&Math.abs(n.x)<1&&Math.abs(n.y)<1&&t>.5&&(this.$zoom.stop(),this.fitZoom(i),this.stopJQAnimIfTranslated=!1)}.bind(this),done:function(){this.fitZoom(i),this.stopJQAnimIfTranslated=!1}.bind(this)})},i.prototype.transform=function(e,i){var s={};return s[t.TRANSITION_PROP+"Duration"]=i?i+"s":"",s[t.TRANSITION_PROP]=i?"":"none",s[t.TRANSFORM_PROP]=t.getTransformValue(e),this.item.get().css(s),this},i.prototype.translate=function(e,i,s){var n={},o=i?this.getScale():null;return n[t.TRANSITION_PROP+"Duration"]=s?s+"s":"",n[t.TRANSITION_PROP]=s?"":"none",n[t.TRANSFORM_PROP]=t.getTransformValue({translate:e,scale:o?[o.x,o.y]:[1]}),this.item.get().css(n),this},i.prototype.translateByState=function(t,e,i){return t[0]=this.item.isCurrent()?t[0]:this.item.isPrev()?-this.item.width+t[0]:this.item.width+t[0],this.translate(t,e,i)},i.prototype.scale=function(e,i,s){var n={},o=i?this.getTranslate():null;return n[t.TRANSITION_PROP+"Duration"]=s?s+"s":"",n[t.TRANSITION_PROP]=s?"":"none",n[t.TRANSFORM_PROP]=t.getTransformValue({translate:o?[o.x,o.y]:[0],scale:e}),this.item.get().css(n),this},i.prototype.clearTransform=function(){throw"Implement clearTransform!"},i.prototype.edgeAnim=function(){throw"Implement edgeAnim!"},i.prototype.closeAnim=function(){throw"Implement closeAnim!"},i.prototype.getTranslate=function(){return t.getTranslate(this.item.get())},i.prototype.getScale=function(){return t.getScale(this.item.get())},i.prototype.getZoomScale=function(){return t.getScale(this.$zoom)}}(window.mjGallery,jQuery),function(t,e){var i="opacity."+t.NS,s="Item",n=["zoom","fitZoom","setOrigin","isScrollable","getContent","refreshSize","load","isNext","isPrev","isCurrent","getSrc","getTypeAttr","getType","setTitle","setDescription","getTitle","getDescription","get","getSource","getHeight","getWidth","getIndex"],o={getSrc:"getSrcAttr",getSrcset:"getSrcsetAttr",getSizes:"getSizesAttr"},r=function(e,i){return i===t.EVENTS.SCROLL||/touch/.test(e.type)&&i===t.EVENTS.POINTER&&2!==e.originalEvent.touches.length},h=function(e){t.Item.generateAPI.call(this,e,n),t.DEBUG&&(this.item=e)},l=t.Item=function(i,s,n,o){this.mjGallery=s,this.index=n,this.$source=i||e(null),o=o||h,this.API=new o(this),this.prev=this.next=this.current=!1,this.stealsPointer=this.stealsPointer||!1,this.zoomable=this.zoomable||!1,this.zoomValue=1,this.generateItem(),this.trfCtrl=t.USE_TRANSITIONS?new t.ItemTransformationCSSController(this,s):new t.ItemTransformationJSController(this,s),this.refreshSize(),this.refreshSize=this.refreshSize.bind(this),t.EVENT.on(t.EVENT.resize,this.refreshSize.bind(this),s)};l.API=n,l.TYPE={},l.CLASS={},l.GET_TYPE={},l.getClass=function(t){var i=l.getType(t),s=l;return e.each(l.TYPE,function(t,e){if(e===i)return s=l.CLASS[t],!1}),s},l.getType=function(i){var s=i.data(t.DATA.src)||i.attr("href"),n=i.data(t.DATA.type);return n||(e.each(l.GET_TYPE,function(e,i){!!i&&i(s,n)&&(n=t.Item.TYPE[e])}),n)},l.extend=function(e,i,s,n){t.extend(s,l),l.TYPE[e]=i,l.CLASS[e]=s,l.GET_TYPE[e]=n},l.generateAPI=function(t,e){e.forEach(function(e){this[e]=function(){var i=t[o[e]||e].apply(t,arguments);return i===t?this:i}},this)},l.prototype.destroy=function(){t.EVENT.off(t.EVENT.resize,this.refreshSize,this.mjGallery)},l.prototype.getOption=function(e){return this.$source.data(t.DATA[e])},l.prototype.getAPI=function(){return this.API},l.prototype.getIframe=function(){return null},l.prototype.get=function(){return this.$self},l.prototype.getSource=function(){return this.$source},l.prototype.getContent=function(){return this.$content},l.prototype.getZoom=function(){return this.$zoom},l.prototype.getHeight=function(){return this.height},l.prototype.getWidth=function(){return this.width},l.prototype.getIndex=function(){return this.index},l.prototype.isEmpty=function(){return!this.$self.length},l.prototype.isNext=function(){return this.next},l.prototype.isPrev=function(){return this.prev},l.prototype.isCurrent=function(){return this.current},l.prototype.getZoomRect=function(){return this.$zoom[0].getBoundingClientRect()},l.prototype.getContentRect=function(){return this.$content[0].getBoundingClientRect()},l.prototype.isScrollable=function(e){e=e?e.add(e.parents(t.DATA.selector("scrollable",!0))):null;var i=!1;return e&&(i=(e.get()||[]).some(function(t){return t.offsetHeight!==t.scrollHeight||t.offsetWidth!==t.scrollWidth})),i||this.isViewScrollable()},l.prototype.isViewScrollable=function(){return this.$view[0].offsetHeight!==this.$view[0].scrollHeight||this.$view[0].offsetWidth!==this.$view[0].scrollWidth},l.prototype.considerEventAsOnOverlay=function(e){var i=t.$t(e.target);return!this.loaded||i.hasClass(t.CLASS.zoom)||i.hasClass(t.CLASS.view)||i.hasClass(t.CLASS.item)},l.prototype.fitZoom=function(){return this.trfCtrl.fitZoom.apply(this.trfCtrl,arguments),this},l.prototype.zoom=function(t){return void 0!==t?(this.trfCtrl.zoom.apply(this.trfCtrl,arguments),this):this.zoomValue},l.prototype.translateZoomBy=function(t,e,i){var s=this.trfCtrl.translateZoomBy.apply(this.trfCtrl,arguments);return i?s:this},l.prototype.isZoomedIn=function(){return this.trfCtrl.isZoomedIn.apply(this.trfCtrl,arguments)},l.prototype.isZoomable=function(){return this.zoomable&&this.mjGallery.getOption(t.OPTIONS.ZOOMABLE)&&!1!==this.getZoomableAttr()},l.prototype.shouldPreserveEvent=function(e,i){var s=this.getOption("events")||"";if(s||this.mjGallery.getOptions().getOriginal(t.OPTIONS.PRESERVE_EVENTS)||!this.isViewScrollable())s||(s=this.mjGallery.getOption(t.OPTIONS.PRESERVE_EVENTS)||"");else if(r(i,e))return!0;var n=new t.EVENT.Event({type:e,item:this.getAPI(),event:i},this.mjGallery);return t.EVENT.fire(t.EVENT.event,n,this.mjGallery),n.isDefaultPrevented()||s!==t.EVENTS.NONE&&(s===t.EVENTS.ALL||~s.indexOf(e))},l.prototype.generateItem=function(){return this.$source.length?(this.$self=e(t.TEMPLATE.ITEM.SELF({loaded:!1,type:this.type,zoomable:this.isZoomable(),fullSize:this.isFullSize(),objectFitCover:this.isObjectFitCover()})),this.generateContent(),this.$view=this.$self.find(t.CLASS.selector("view")),this.$zoom=this.$self.find(t.CLASS.selector("zoom")),this.addSizesToContent().addSizesToView(),this.$self.find(t.CLASS.selector("view")).append(this.$content),this.mjGallery.$itemsList.append(this.$self),this):(this.$self=this.$content=this.$source,this)},l.prototype.generateContent=function(){return this.$content=e("<div></div>"),this},l.prototype.load=function(){return this.isEmpty()?this:(this.setAsLoaded(),this.fireLoadEvent(),this)},l.prototype.setAsLoaded=function(){return this.loading=!1,this.loaded=!0,this.$self.addClass(t.CLASS.itemLoaded),this},l.prototype.fireLoadEvent=function(){return this.loadEvent=new t.EVENT.Event({item:this.getAPI(),index:this.getIndex(),src:this.getSrcAttr()},this.mjGallery),t.EVENT.fire(t.EVENT.load,this.loadEvent,this.mjGallery),this},l.prototype.getSrcAttr=function(){return this.src?this.src:(this.src=String(this.getOption("src")||this.$source.attr("href")),this.src="undefined"===this.src?"":this.src,this.src)},l.prototype.getFullSizeAttr=function(){return this.getOption("fullSize")},l.prototype.getZoomableAttr=function(){return this.getOption("zoomable")},l.prototype.getObjectFitCoverAttr=function(){return this.getOption("objectFitCover")},l.prototype.isObjectFitCover=function(){var e=this.getObjectFitCoverAttr();return"boolean"==typeof e?e:t.SUPPORTS_OBJECT_FIT&&this.mjGallery.getOption(t.OPTIONS.CONTENT_OBJECT_FIT_COVER)||!1},l.prototype.isFullSize=function(){var e=this.getFullSizeAttr();return"boolean"==typeof e?e:this.mjGallery.getOption(t.OPTIONS.FULL_SIZE_ITEMS)||!1},l.prototype.getTypeAttr=function(){return this.getOption("type")},l.prototype.getType=function(){return this.type},l.prototype.getContentSizes=function(){return this.contentSizes?this.contentSizes:(this.contentSizes={},this.contentSizes.maxHeight=this.getOption("itemMaxHeight")||this.mjGallery.contentSizes.maxHeight,this.contentSizes.minHeight=this.getOption("itemMinHeight")||this.mjGallery.contentSizes.minHeight,this.contentSizes.maxWidth=this.getOption("itemMaxWidth")||this.mjGallery.contentSizes.maxWidth,this.contentSizes.minWidth=this.getOption("itemMinWidth")||this.mjGallery.contentSizes.minWidth,this.contentSizes)},l.prototype.getViewSizes=function(){return this.viewSizes?this.viewSizes:(this.viewSizes={},this.viewSizes.maxHeight=this.getOption("viewMaxHeight")||this.mjGallery.viewSizes.maxHeight,this.viewSizes.maxWidth=this.getOption("viewMaxWidth")||this.mjGallery.viewSizes.maxWidth,this.viewSizes)},l.prototype.addSizesToContent=function(){return this.contentSizes||this.getContentSizes(),this.$content.css(this.contentSizes),this},l.prototype.addSizesToView=function(){return this.viewSizes||this.getViewSizes(),this.$view.css(this.viewSizes),this},l.prototype.setTitle=function(t){var e=void 0!==this.title;return this.title=t,e&&this.mjGallery.refreshItemInfo(),this},l.prototype.setDescription=function(t){var e=void 0!==this.description;return this.description=t,e&&this.mjGallery.refreshItemInfo(),this},l.prototype.getTitle=function(){if(void 0!==this.title)return this.title;var i=this.mjGallery.getOption(t.OPTIONS.ITEM_TITLE_SELECTOR);if(!1===i)return this.title="",this.title;var s=this.getOption("itemTitle");return this.title=void 0!==s?s:i?"function"==typeof i?i.call(this.API):this.$source.find(i).text():this.$source.find("[alt]").attr("alt")||this.$source.attr("title")||this.$source.attr("aria-label")||e("#"+this.$source.attr("aria-labelledby")).text()||this.$source.find("figcaption, h1, h2, h3, h4, h5, h6, [class*='title'], [class*='name']").first().text()||this.$source.text()||"",this.title},l.prototype.getDescription=function(){if(void 0!==this.description)return this.description;var i=this.mjGallery.getOption(t.OPTIONS.ITEM_DESCRIPTION_SELECTOR);if(!1===i)return this.description="",this.description;var s=this.getOption("itemDescription");return this.description=void 0!==s?s:i?"function"==typeof i?i.call(this.API):this.$source.find(i).text():this.$source.attr("aria-description")||e("#"+this.$source.attr("aria-describedby")).text()||this.$source.find("p, [class*='description'], [class*='detail']").first().text()||"",this.description},l.prototype.refreshSize=function(){return this.width=this.$self.width(),this.height=this.$self.height(),this.gap=this.isFullSize()?Math.abs(2*parseInt(this.$self.css("left")||0)):0,this},l.prototype.getTrfCtrl=function(){return this.trfCtrl},l.prototype.setOpacity=function(e,s){var n={opacity:e};return n[t.TRANSITION_PROP+"Duration"]=s?s+"s":"",n[t.TRANSITION_PROP]=s?"":"none",s&&!t.USE_TRANSITIONS?("number"!=typeof e&&(n.opacity=1),n[t.TRANSITION_PROP]="none",this.$self.stop(i).animate(n,{queue:i,easing:t.JS_EASING,duration:1e3*s}),this.$self.dequeue(i)):this.$self.css(n),this},l.prototype.getOpacity=function(){return+this.$self.css("opacity")},l.prototype.clearOpacity=function(t){return this.setOpacity("",t)},l.prototype.removeFocus=function(){var t=this.$self.find(":focus");return t.length&&t.blur(),this},l.prototype.setAsCurrent=function(e,i){this.prev=this.next=!1,this.current=!0,this.load(),e?this.trfCtrl.clearTransform(e,function(){i.call(this)}.bind(this)):t.USE_TRANSITIONS&&this.trfCtrl.stopTransition(),this.$self.removeClass(t.CLASS.itemPrev).removeClass(t.CLASS.itemNext).addClass(t.CLASS.itemCurrent).removeClass(t.CLASS.itemAnim);var s=new t.EVENT.Event({item:this.API,index:this.getIndex()},this.mjGallery);return t.EVENT.fire(t.EVENT.currentItemChanged,s,this.mjGallery),this},l.prototype.setAsPrev=function(e,i){return this.next=this.current=!1,this.prev=!0,this.load(),this.isZoomedIn()&&this.zoom(1,void 0,e,!0),this.removeFocus(),e?(t.USE_TRANSITIONS&&this.$self.addClass(t.CLASS.itemAnim),this.trfCtrl.clearTransform(e,function(){this.$self.removeClass(t.CLASS.itemAnim),i&&i.call(this)}.bind(this))):(this.$self.removeClass(t.CLASS.itemAnim),t.USE_TRANSITIONS&&this.trfCtrl.stopTransition()),this.$self.removeClass(t.CLASS.itemCurrent).removeClass(t.CLASS.itemNext).addClass(t.CLASS.itemPrev),this},l.prototype.setAsNext=function(e,i){return this.prev=this.current=!1,this.next=!0,this.load(),this.isZoomedIn()&&this.zoom(1,void 0,e,!0),this.removeFocus(),e?(t.USE_TRANSITIONS&&this.$self.addClass(t.CLASS.itemAnim),this.trfCtrl.clearTransform(e,function(){this.$self.removeClass(t.CLASS.itemAnim),i&&i.call(this)}.bind(this))):(this.$self.removeClass(t.CLASS.itemAnim),t.USE_TRANSITIONS&&this.trfCtrl.stopTransition()),this.$self.removeClass(t.CLASS.itemCurrent).removeClass(t.CLASS.itemPrev).addClass(t.CLASS.itemNext),this},l.prototype.clearState=function(){return this.prev=this.next=this.current=!1,this.trfCtrl.clearTransform(),this.unsetAsClosing(),this.$self.removeClass(t.CLASS.itemCurrent).removeClass(t.CLASS.itemPrev).removeClass(t.CLASS.itemNext).removeClass(t.CLASS.itemAnim),this},l.prototype.setAsClosing=function(){return this.removeFocus(),this.trfCtrl.closeAnim.apply(this.trfCtrl,arguments),this},l.prototype.unsetAsClosing=function(){this.$self.removeClass(t.CLASS.itemClosingDown).removeClass(t.CLASS.itemClosingUp).removeClass(t.CLASS.itemClosingScale);var e={opacity:""};return e[t.TRANSFORM_PROP]="",e[t.TRANSITION_PROP+"Duration"]="",e[t.TRANSITION_PROP]="",this.$self.stop().css(e),this},l.prototype.edgeAnim=function(){return this.trfCtrl.edgeAnim.apply(this.trfCtrl,arguments),this},l.prototype.scale=function(){return this.trfCtrl.scale.apply(this.trfCtrl,arguments),this},l.prototype.on=function(t,e,i){return i&&this.$self.off(t+"."+s),this.$self.on(t+"."+s,e.bind(this)),this},l.prototype.one=function(t,e,i){return i&&this.$self.off(t+"."+s),this.$self.one(t+"."+s,e.bind(this)),this}}(window.mjGallery,jQuery),function(t,e){var i=["getHTML","getMethod"].concat(t.Item.API),s=function(e){t.Item.generateAPI.call(this,e,i)},n=function(){return['<div class="'+t.CLASS.itemContent+" "+t.CLASS.html+'">','<div class="'+t.CLASS.itemHtmlContentCenter+'">','<div class="'+t.CLASS.itemHtmlContentWrapper+" "+t.CLASS.draggable+'">',"</div>","</div>","</div>"].join("")},o=t.HTMLItem=function(e,i,n){this.type=t.Item.TYPE.HTML,t.Item.call(this,e,i,n,s)};t.Item.extend("HTML","html",o,function(e,i){return!(e||i&&i!==t.Item.TYPE.IMAGE)}),o.METHOD={APPEND:"append",CLONE:"clone",GENERATE:"generate"},o.prototype.generateContent=function(){return this.$content=e(n()),this.$wrapper=this.$content.find(t.CLASS.selector("itemHtmlContentWrapper")),this},o.prototype.isScrollable=function(e){return t.Item.prototype.isScrollable.call(this,e)||this.$wrapper[0].offsetHeight!==this.$wrapper[0].scrollHeight||this.$wrapper[0].offsetWidth!==this.$wrapper[0].scrollWidth},o.prototype.getIframe=function(){return this.$iframe?this.$iframe:(this.$iframe=this.$iframe||this.$self.find("iframe"),this.$iframe||this.$iframe.length||(this.$iframe=null),this.$iframe)},o.prototype.considerEventAsOnOverlay=function(e){var i=t.$t(e.target);return t.Item.prototype.considerEventAsOnOverlay.call(this,e)||i.hasClass(t.CLASS.itemHtmlContentCenter)||i.hasClass(t.CLASS.html)},o.prototype.shouldPreserveEvent=function(e,i){var s=this.getOption("events")||"",n=t.$t(i.target).is("input:not([disabled], [type='submit'], [type='checkbox'], [type='radio']), textarea:not([disabled]), *[contenteditable]");if((e===t.EVENTS.POINTER&&(!/touch/.test(i.type)||t.$t(i.target).is(":focus"))||e===t.EVENTS.KEYS)&&n)return!0;var o=!!t.$t(i.target).closest(t.CLASS.selector("itemHtmlContentWrapper")).length,r=t.$t(i.target).closest(t.DATA.selector("scrollable",!0)),h=!!r.length;if(s||this.mjGallery.getOptions().getOriginal(t.OPTIONS.PRESERVE_EVENTS)||!(o||h||this.isViewScrollable()))s||(s=this.mjGallery.getOption(t.OPTIONS.PRESERVE_EVENTS)||"");else if(this.isScrollable(r)&&(e===t.EVENTS.SCROLL||/touch/.test(i.type)&&e===t.EVENTS.POINTER&&2!==i.originalEvent.touches.length))return!0;var l=new t.EVENT.Event({type:e,item:this.getAPI(),event:i},this.mjGallery);return t.EVENT.fire(t.EVENT.event,l,this.mjGallery),i.isDefaultPrevented()||s!==t.EVENTS.NONE&&(s===t.EVENTS.ALL||~s.indexOf(e))},o.prototype.getHTML=function(i){return void 0!==this.$html?this.$html:(~[o.METHOD.APPEND,o.METHOD.CLONE].indexOf(this.getMethod())?(this.$html=e(this.getSrcAttr()),"script"===this.$html[0].tagName.toLowerCase()&&(this.$html=e(this.$html.html())),this.getMethod()===o.METHOD.CLONE&&(this.$html=this.$html.clone()),this.$html.css("display",""),i&&i(this.$html)):this.mjGallery.getOption(t.OPTIONS.HTML_GENERATOR)&&(this.mjGallery.getOption(t.OPTIONS.HTML_GENERATOR).call(this.getAPI(),i,this.getAPI()),this.$html=e([null])),this.$html)},o.prototype.addSizesToContent=function(){if(this.$content)return this.contentSizes||this.getContentSizes(),this.$content.find(t.CLASS.selector("itemHtmlContentWrapper")).css(this.contentSizes),this},o.prototype.getMethod=function(){var e=this.$source.data(t.DATA.method)||this.mjGallery.getOption(t.OPTIONS.HTML_GENERATE_METHOD);return e=e?e.toLowerCase():this.getSrcAttr()?o.METHOD.APPEND:o.METHOD.GENERATE},o.prototype.appendContent=function(t){return this.$wrapper.append(t),this},o.prototype.load=function(){return this.loaded||this.loading||this.isEmpty()?this:(this.loading=!0,this.getHTML(function(t){t&&(this.$html=t.jquery?t:e(t)),this.appendContent(this.$html),this.setAsLoaded(),this.refreshSize(),this.fireLoadEvent()}.bind(this)),this)}}(window.mjGallery,jQuery),function(t,e){var i=[].concat(t.Item.API),s=function(e){t.Item.generateAPI.call(this,e,i)},n=function(e){return e=e||{},'<iframe src="'+(e.src||"")+'" scrolling="yes" frameborder="0" allowfullscreen mozallowfullscreen webkitallowfullscreen class="'+t.CLASS.itemContent+" "+t.CLASS.draggable+" "+t.CLASS.iframe+'"></iframe>'},o=t.IframeItem=function(e,i,n){this.type=t.Item.TYPE.IFRAME,this.stealsPointer=!0,t.Item.call(this,e,i,n,s)};t.Item.extend("IFRAME","iframe",o,function(t){return t=String(t),t.match(/^(?:https?:)?(?:\/\/)?(?:www\.)?(google\.[a-z]+|goo\.gl)\/maps/)}),o.prototype.generateContent=function(){return this.$content=e(n()),this},o.prototype.getIframe=function(){return this.$content},o.prototype.load=function(){return this.loaded||this.loading||this.isEmpty()?this:(this.$content.attr("src",this.getSrcAttr()),this.loading=!0,this.$content.off(this.mjGallery.withNS("load")).one(this.mjGallery.withNS("load"),function(){this.setAsLoaded(),this.fireLoadEvent(),setTimeout(this.refreshSize.bind(this),0)}.bind(this)),this)}}(window.mjGallery,jQuery),function(t,e){var i=["getSrcset","getSizes"].concat(t.Item.API),s=function(e){t.Item.generateAPI.call(this,e,i)},n=function(e){return e=e||{},'<img src="'+(e.src||"")+'" srcset="'+(e.srcset||"")+'" sizes="'+(e.sizes||"")+'" alt="'+(e.alt||"")+'" class="'+t.CLASS.itemContent+" "+t.CLASS.draggable+" "+t.CLASS.image+'">'},o=t.ImageItem=function(e,i,n){this.type=t.Item.TYPE.IMAGE,this.zoomable=!0,t.Item.call(this,e,i,n,s)};t.Item.extend("IMAGE","image",o,function(t,e){return!e}),o.prototype.generateContent=function(){return this.$content=e(n({alt:this.getTitle(),sizes:this.getSizesAttr()})),this},o.prototype.load=function(){return this.loaded||this.loading||this.isEmpty()?this:(this.$content.attr({srcset:this.getSrcsetAttr(),src:this.getSrcAttr()}),this.$content[0].complete&&0!==this.$content[0].naturalHeight&&(this.setAsLoaded(),this.fireLoadEvent()),this.loaded?(this.setAsLoaded(),this.refreshSize(),this):(this.loading=!0,this.$content.off(this.mjGallery.withNS("load")).one(this.mjGallery.withNS("load"),function(){this.setAsLoaded(),this.fireLoadEvent(),setTimeout(this.refreshSize.bind(this),0)}.bind(this)),this))},o.prototype.getSrcsetAttr=function(){return this.getOption("srcset")||""},o.prototype.getSizesAttr=function(){var e=this.getOption("sizes");return e||(this.getContentSizes(),e=this.contentSizes.maxWidth?parseFloat(this.contentSizes.maxWidth)+"%":this.mjGallery.getOption(t.OPTIONS.FULL_SIZE_ITEMS)?"100%":t.NOT_FULL_SIZE_ITEMS_WIDTH+"%"),e}}(window.mjGallery,jQuery),function(t,e){var i=t.ItemTransformationCSSController=function(e,i){t.ItemTransformationController.call(this,e,i)};t.extend(t.ItemTransformationCSSController,t.ItemTransformationController),i.prototype.fitZoom=function(e){var i=this.prepareFitZoom();return i?(this.$zoom.off(this.mjGallery.withNS(t.TRANSITIONEND+".fitZoom")),e?(this.$zoom.one(this.mjGallery.withNS(t.TRANSITIONEND+".fitZoom"),function(){e&&e.call(this.item)}.bind(this)),this.$zoom.stop().css(i.CSS)):this.$zoom.stop().css(i.CSS),this):(this.$zoom.stop(),e&&e.call(this.item),this)},i.prototype.zoomAnim=function(e,i,s,n,o,r){var h=new t.EVENT.Event({current:this.item.getAPI(),zoom:this.zoomValue,zoomedIn:this.isZoomedIn()},this.mjGallery);return e[t.TRANSITION_PROP]="",e[t.TRANSITION_PROP+"Duration"]="number"==typeof s?s+"s":"",this.$zoom.off(this.mjGallery.withNS(t.TRANSITIONEND+".zoom")).one(this.mjGallery.withNS(t.TRANSITIONEND+".zoom"),function(){r&&r.call(this.item),t.EVENT.fire(t.EVENT.zoom,h,this.mjGallery)}.bind(this)),this.$zoom.stop().css(e),this},i.prototype.clearTransform=function(e,i){var s={};return s[t.TRANSITION_PROP]=e?"":"none",s[t.TRANSITION_PROP+"Duration"]=e?e+"s":"",s[t.TRANSFORM_PROP]="",e&&i&&this.item.on(this.mjGallery.withNS(t.TRANSITIONEND),function(e){e.originalEvent.propertyName.match(/transform/i)&&(this.item.get().off(this.mjGallery.withNS(t.TRANSITIONEND)),i.call(this.item))}.bind(this),!0),this.item.get().css(s),!e&&i&&i.call(this.item),this},i.prototype.setTransition=function(e){var i={};return i[t.TRANSITION_PROP]=e,this.item.get().css(i),this},i.prototype.clearTransition=function(t){return t&&this.clearTransitionDuration(),this.setTransition("")},i.prototype.stopTransition=function(t){return t&&this.setTransitionDuration(0),this.setTransition("none")},i.prototype.setTransitionDuration=function(e){var i={};return e="number"==typeof e?e+"s":e,i[t.TRANSITION_PROP+"Duration"]=e,this.item.get().css(i),this},i.prototype.clearTransitionDuration=function(){return this.setTransitionDuration("")},i.prototype.edgeAnim=function(e,i){if(!this.item.isCurrent())return this;var s={},n=t.CLASS["itemEdgeAnim"+(e===t.DIR.RIGHT?"Right":"Left")];return s[t.TRANSFORM_PROP]="",s[t.TRANSITION_PROP]="",s[t.TRANSITION_PROP+"Duration"]=t.EDGE_ANIM_START_DURATION/1e3+"s",this.item.get().css(s).addClass(n),this.item.one(this.mjGallery.withNS(t.TRANSITIONEND),function(){this.item.get().removeClass(n),this.clearTransform(t.DEF_DURATION/1e3,i)}.bind(this),!0),this},i.prototype.closeAnim=function(e,i,s,n){return this.clearTransform().setTransition(e?t.TRANSFORM_PREFIX+"transform "+e+"s, opacity "+e/4+"s":""),s&&this.item.get().addClass(t.CLASS["itemClosing"+(i===t.DIR.UP?"Up":"Down")]),n&&this.item.get().addClass(t.CLASS.itemClosingScale),this}}(window.mjGallery,jQuery),function(t,e){var i="opacity."+t.NS,s="transform."+t.NS,n=t.ItemTransformationJSController=function(e,i){t.ItemTransformationController.call(this,e,i)};t.extend(t.ItemTransformationJSController,t.ItemTransformationController),n.prototype.fitZoom=function(e){var i=this.prepareFitZoom();if(!i)return this.$zoom.stop(),e&&e.call(this.item),this;var s=t.getScale(this.$zoom),n={textIndent:0};return this.$zoom.css(n).stop().animate({textIndent:1},{easing:t.JS_EASING,duration:250,step:function(e){var n={};n[t.TRANSFORM_PROP]=t.getTransformValue({translate:[i.currentTranslate.x+(i.translate[0]-i.currentTranslate.x)*e,i.currentTranslate.y+(i.translate[1]-i.currentTranslate.y)*e],scale:[s.x]}),this.$zoom.css(n)}.bind(this),done:function(){e&&e.call(this.item)}.bind(this)}),this},n.prototype.zoomAnim=function(e,i,s,n,o,r){var h=t.getScale(this.$zoom),l={textIndent:0};return this.$zoom.css(l).stop().animate({textIndent:1},{easing:t.JS_EASING,duration:"number"==typeof s?1e3*s:250,step:function(e){var s={};s[t.TRANSFORM_PROP]=t.getTransformValue({translate:[n[0]+(o[0]-n[0])*e,n[1]+(o[1]-n[1])*e],scale:[h.x+(i-h.x)*e]}),this.$zoom.css(s)}.bind(this),done:function(){r&&r.call(this.item);var e=new t.EVENT.Event({current:this.item.getAPI(),zoom:this.zoomValue,zoomedIn:this.isZoomedIn()},this.mjGallery);t.EVENT.fire(t.EVENT.zoom,e,this.mjGallery)}.bind(this)}),this},n.prototype.clearTransform=function(e,i){var n={};if(n[t.TRANSITION_PROP]="none",!e)return n[t.TRANSFORM_PROP]="",this.item.get().css(n),i&&i.call(this.item),this;var o=this.getTranslate(),r=this.getScale();return n.textIndent=1,this.item.get().css(n),this.item.get().stop(s).animate({textIndent:0},{queue:s,easing:t.JS_EASING,duration:e?1e3*e:t.DEF_DURATION,step:function(e){var i={};this.item.isPrev()?i[t.TRANSFORM_PROP]=t.getTransformValue({translate:[-this.item.width+(this.item.width+o.x)*e,o.y*e],scale:[r.x+(1-r.x)*(1-e)]}):this.item.isNext()?i[t.TRANSFORM_PROP]=t.getTransformValue({translate:[this.item.width+(o.x-this.item.width)*e,o.y*e],scale:[r.x+(1-r.x)*(1-e)]}):this.item.isCurrent()&&(i[t.TRANSFORM_PROP]=t.getTransformValue({translate:[o.x*e,o.y*e],scale:[r.x+(1-r.x)*(1-e)]})),this.item.get().css(i)}.bind(this),done:i?i.bind(this.item):null}),this.item.get().dequeue(s),this},n.prototype.edgeAnim=function(e,i){if(!this.item.isCurrent())return this;var n={},o=t.CLASS["itemEdgeAnim"+(e===t.DIR.RIGHT?"Right":"Left")];n[t.TRANSFORM_PROP]="",n[t.TRANSITION_PROP]="none",n.textIndent=0,this.item.get().css(n).addClass(o);var r=this.getTranslate();return this.item.get().css(n).stop(s).animate({textIndent:1},{queue:s,easing:t.JS_EASING,duration:t.EDGE_ANIM_START_DURATION,step:function(e){var i={};i[t.TRANSFORM_PROP]=t.getTransformValue({translate:[r.x*e],scale:[1]}),this.item.get().css(i)}.bind(this),done:function(){this.item.get().removeClass(o),this.clearTransform(t.DEF_DURATION/1e3,i)}.bind(this)}),this.item.get().dequeue(s),this},n.prototype.closeAnim=function(e,n,o,r){var h={},l=this.getTranslate(),a=this.getScale();return h.textIndent=1,h.opacity=this.item.getOpacity(),this.item.get().css(h).stop(s).stop(i).animate({textIndent:0},{easing:t.JS_EASING,duration:e?1e3*e:t.DEF_DURATION,step:function(e){var i={opacity:o?h.opacity-h.opacity*(1-(e/.25-3)):h.opacity-h.opacity*(1-(e/.33333-2))},s=this.item.height/2,u=n===t.DIR.UP?-s+(s+l.y)*e:s+(l.y-s)*e;i.opacity=Math.min(1,Math.max(0,i.opacity)),i[t.TRANSFORM_PROP]=t.getTransformValue({translate:[0,o?u:0],scale:[r?a.x-(a.x-.33333)*(1-e):1]}),this.item.get().css(i)}.bind(this)}),
o&&this.item.get().addClass(t.CLASS["itemClosing"+(n===t.DIR.UP?"Up":"Down")]),r&&this.item.get().addClass(t.CLASS.itemClosingScale),this}}(window.mjGallery,jQuery),function(t,e){var i=["play","pause","stop","seekTo","volume","getPlayer"].concat(t.Item.API),s=function(e){t.Item.generateAPI.call(this,e,i)},n=function(){return'<div class="'+t.CLASS.itemContent+" "+t.CLASS.draggable+" "+t.CLASS.video+'"></div>'},o=t.VideoItem=function(e,i,n){this.type=t.Item.TYPE.YOUTUBE,this.stealsPointer=!0,t.Item.call(this,e,i,n,s),this.pauseVideoBeforeClose=function(){this.pause()}.bind(this)};t.Item.extend("VIDEO","video",o),o.METHOD={APPEND:"append",CLONE:"clone"},o.prototype.generateContent=function(){return this.$content=e(n()),this},o.prototype.shouldPreserveEvent=function(e){return e===t.EVENTS.POINTER||t.Item.prototype.shouldPreserveEvent.apply(this,arguments)},o.prototype.getPlayer=function(){return this.videoPlayer||null},o.prototype.volume=function(t){return void 0===t?this.videoPlayer&&this.loaded?this.videoPlayer.volume:null:(this.videoPlayer&&this.loaded&&(this.videoPlayer.volume=t),this)},o.prototype.shouldAutoplay=function(){return void 0!==this.autoplay?this.autoplay:(this.autoplay=this.getOption("autoplay"),this.$video&&this.$video.length&&this.$video[0].hasAttribute("autoplay")&&(this.autoplay=this.$video.prop("autoplay")),void 0===this.autoplay&&(this.autoplay=this.mjGallery.getOption(t.OPTIONS.AUTOPLAY_VIDEO)),this.autoplay)},o.prototype.play=function(t){return this.videoPlayer&&this.loaded&&(t&&this.seekTo(t),this.videoPlayer.play()),this},o.prototype.pause=function(){return this.videoPlayer&&this.loaded&&this.videoPlayer.pause(),this},o.prototype.seekTo=function(t){return this.videoPlayer&&this.loaded&&(this.videoPlayer.currentTime=!0===t?this.stoppedAt||0:t||0),this},o.prototype.stop=function(){return this.videoPlayer&&this.loaded&&(this.videoPlayer.pause(),this.videoPlayer.currentTime=0),this},o.prototype.destroy=function(){t.Item.prototype.destroy.call(this),t.EVENT.off(t.EVENT.beforeClose,this.pauseVideoBeforeClose,this.mjGallery)},o.prototype.getMethod=function(){return void 0!==this.method?this.method:(this.method=this.$source.data(t.DATA.method)||this.mjGallery.getOption(t.OPTIONS.HTML_GENERATE_METHOD),this.method=this.method?this.method.toLowerCase():o.METHOD.APPEND,~[o.METHOD.APPEND,o.METHOD.CLONE].indexOf(this.method)||(this.method=o.METHOD.APPEND),this.method)},o.prototype.get$Video=function(){return void 0!==this.$video?this.$html:(this.$video=e(this.getSrcAttr()),"script"===this.$video[0].tagName.toLowerCase()&&(this.$video=e(this.$video.html())),this.getMethod()===o.METHOD.CLONE&&(this.$video=this.$video.clone()),this.$video.css("display",""),this.$video)},o.prototype.load=function(){if(this.loaded||this.loading||this.isEmpty())return this.suspended&&(this.suspended=!1,this.getPlayer().load()),this;this.get$Video(),this.videoPlayer=this.$video[0],this.$content.append(this.$video);var e=function(){this.setAsLoaded(),this.fireLoadEvent(),setTimeout(this.refreshSize.bind(this),0),this.mjGallery.on(t.EVENT.beforeClose,this.pauseVideoBeforeClose,this.mjGallery);var e=new t.EVENT.Event({item:this.API,index:this.getIndex(),player:this.getPlayer()},this.mjGallery);t.EVENT.fire(t.EVENT.videoReady,e,this.mjGallery),!this.current||e.isDefaultPrevented()||this.loadEvent.isDefaultPrevented()||this.mjGallery.isClosed()?this.stop():this.shouldAutoplay()&&this.play(),this.$video.off(this.mjGallery.withNS("timeupdate","pause","seeked")).on(this.mjGallery.withNS("timeupdate","pause","seeked"),function(){this.stoppedAt=this.$video[0].currentTime}.bind(this)),this.$video.off(this.mjGallery.withNS("abort","ended")).on(this.mjGallery.withNS("abort","ended"),function(){this.stoppedAt=0}.bind(this))}.bind(this);return this.$video[0].readyState&&0!==this.$video[0].videoHeight?(e(),this):(this.loading=!0,this.$video.off(this.mjGallery.withNS("suspend")).one(this.mjGallery.withNS("suspend"),function(){if(this.current)return void this.getPlayer().load();this.suspended=!0}.bind(this)),this.$video.off(this.mjGallery.withNS("canplay")).one(this.mjGallery.withNS("canplay"),function(){e(),setTimeout(this.refreshSize.bind(this),0)}.bind(this)),this)},o.prototype.setAsCurrent=function(e,i){return e?t.Item.prototype.setAsCurrent.call(this,e,function(){this.videoPlayer&&this.loaded&&(this.seekTo(!0),this[this.shouldAutoplay()?"play":this.stoppedAt?"pause":"stop"]()),i()}.bind(this)):(t.Item.prototype.setAsCurrent.apply(this,arguments),this.videoPlayer&&this.loaded&&(this.seekTo(!0),this[this.shouldAutoplay()?"play":this.stoppedAt?"pause":"stop"]())),this},o.prototype.setAsPrev=function(){return t.Item.prototype.setAsPrev.apply(this,arguments),this.videoPlayer&&this.loaded&&!this.videoPlayer.paused&&this[this.stoppedAt?"pause":"stop"](),this},o.prototype.setAsNext=function(){return t.Item.prototype.setAsNext.apply(this,arguments),this.videoPlayer&&this.loaded&&!this.videoPlayer.paused&&this[this.stoppedAt?"pause":"stop"](),this}}(window.mjGallery,jQuery),function(t,e){var i=(window.location.protocol||"https:")+"//player.vimeo.com/api/player.js",s=null,n=[],o=!1,r=function(){s||(s=e("<script>"),t.$t(document.body).append(s),s.one("load."+t.NS,function(){o=!0,n.forEach(function(t){t()}),n=[]}),s.attr("src",i))},h=["getVideoId","play","pause","stop","seekTo","volume","getPlayer"].concat(t.Item.API),l=function(e){t.Item.generateAPI.call(this,e,h)},a=function(){return'<div class="'+t.CLASS.itemContent+" "+t.CLASS.draggable+" "+t.CLASS.vimeo+'"></div>'},u=t.VimeoItem=function(e,i,s){this.type=t.Item.TYPE.VIMEO,this.stealsPointer=!0,t.Item.call(this,e,i,s,l),this.pauseVideoBeforeClose=function(){this.pause()}.bind(this)};t.Item.extend("VIMEO","vimeo",u,function(t){return t=String(t),t.match(/^(?:https?:)?(?:\/\/)?(?:www\.)?(vimeo\.com|player\.vimeo\.com)/)}),u.prototype.generateContent=function(){return this.$content=e(a()),this},u.prototype.getIframe=function(){return this.$iframe},u.prototype.getPlayer=function(){return this.vimeoPlayer||null},u.prototype.volume=function(t){return void 0===t?this.vimeoPlayer&&this.vimeoPlayer.stop?this.vimeoPlayer.getVolume():null:(this.vimeoPlayer&&this.vimeoPlayer.stop&&this.vimeoPlayer.setVolume(t),this)},u.prototype.shouldAutoplay=function(){return void 0!==this.autoplay?this.autoplay:(this.autoplay=this.getOption("autoplay"),void 0===this.autoplay&&(this.autoplay=this.mjGallery.getOption(t.OPTIONS.AUTOPLAY_VIDEO)),this.autoplay)},u.prototype.play=function(t){return this.vimeoPlayer&&this.vimeoPlayer.play&&(t&&this.seekTo(t),this.vimeoPlayer.play()),this},u.prototype.pause=function(){return this.vimeoPlayer&&this.vimeoPlayer.pause&&this.vimeoPlayer.pause(),this},u.prototype.seekTo=function(t){return this.vimeoPlayer&&this.vimeoPlayer.setCurrentTime&&this.vimeoPlayer.setCurrentTime(!0===t?this.stoppedAt||0:t||0),this},u.prototype.stop=function(){return this.vimeoPlayer&&this.vimeoPlayer.stop&&this.vimeoPlayer.stop(),this},u.prototype.destroy=function(){t.Item.prototype.destroy.call(this),t.EVENT.off(t.EVENT.beforeClose,this.pauseVideoBeforeClose,this.mjGallery)},u.prototype.getVideoId=function(){var t=this.getSrcAttr(),e=t.match(/(?:video\/|vimeo\.com\/)([0-9]+)/);return e?e[1]:t},u.prototype.getIframe=function(){return this.$iframe&&this.$iframe.length?this.$iframe:this.$content.find("iframe")},u.prototype.load=function(){if(this.loading&&(this.$iframe=this.getIframe(),this.$iframe.length&&!this.$iframe.data("ready")&&this.$iframe.parent().append(this.$iframe)),this.loaded||this.loading||this.isEmpty())return this;var e=function(){this.vimeoPlayer=new Vimeo.Player(this.$content[0],{id:this.getVideoId(),autoplay:this.current&&this.shouldAutoplay()&&this.mjGallery.isOpened(),autopause:!1}),this.vimeoPlayer.ready().then(function(){this.setAsLoaded(),this.fireLoadEvent(),this.$iframe=this.getIframe().attr("width","").attr("height",""),setTimeout(this.refreshSize,0),this.getTitle(),this.mjGallery.on(t.EVENT.beforeClose,this.pauseVideoBeforeClose,this.mjGallery);var e=new t.EVENT.Event({item:this.getAPI(),index:this.getIndex(),player:this.getPlayer()},this.mjGallery);t.EVENT.fire(t.EVENT.vimeoReady,e,this.mjGallery),(e.isDefaultPrevented()||this.loadEvent.isDefaultPrevented()||this.mjGallery.isClosed())&&this.stop()}.bind(this)),this.vimeoPlayer.on("pause",function(t){this.stoppedAt=t.seconds}.bind(this)),this.vimeoPlayer.on("ended",function(){this.stoppedAt=0}.bind(this))}.bind(this);return o?e():(r(),n.push(e)),this.loading=!0,this},u.prototype.setAsCurrent=function(e,i){return e?t.Item.prototype.setAsCurrent.call(this,e,function(){this.vimeoPlayer&&this.vimeoPlayer.play&&(this.shouldAutoplay()?(this.seekTo(!0),this.play()):this.pause()),i()}.bind(this)):(t.Item.prototype.setAsCurrent.apply(this,arguments),this.vimeoPlayer&&this.vimeoPlayer.play&&(this.shouldAutoplay()?(this.seekTo(!0),this.play()):this.pause())),this},u.prototype.getTitle=function(){return this.title||this.mjGallery.getOptions().isSetByUser(t.OPTIONS.ITEM_TITLE_SELECTOR)?t.Item.prototype.getTitle.call(this):(this.title=this.getOption("itemTitle")||"",!this.title&&this.loaded&&this.vimeoPlayer.getVideoTitle().then(function(t){this.title=t||"",this.mjGallery.refreshItemInfo()}.bind(this))),this.title},u.prototype.setAsPrev=function(){return t.Item.prototype.setAsPrev.apply(this,arguments),this.vimeoPlayer&&this.vimeoPlayer.pause&&this.pause(),this},u.prototype.setAsNext=function(){return t.Item.prototype.setAsNext.apply(this,arguments),this.vimeoPlayer&&this.vimeoPlayer.pause&&this.pause(),this}}(window.mjGallery,jQuery),function(t,e){var i=(window.location.protocol||"https:")+"//www.youtube.com/iframe_api",s=null,n=[],o=!1,r=function(){if(!s){s=e("<script>"),t.$t(document.body).append(s);var r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){o=!0,r&&r(),n.forEach(function(t){t()}),n=[]},s.attr("src",i)}},h=["getVideoId","play","pause","stop","seekTo","volume","getPlayer"].concat(t.Item.API),l=function(e){t.Item.generateAPI.call(this,e,h)},a=function(){return'<div class="'+t.CLASS.itemContent+" "+t.CLASS.draggable+" "+t.CLASS.youtube+'"></div>'},u=t.YouTubeItem=function(e,i,s){this.type=t.Item.TYPE.YOUTUBE,this.stealsPointer=!0,t.Item.call(this,e,i,s,l),this.pauseVideoBeforeClose=function(){this.pause()}.bind(this)};t.Item.extend("YOUTUBE","youtube",u,function(t){return t=String(t),t.match(/^(?:https?:)?(?:\/\/)?(?:www\.)?(youtube\.com|youtu\.be)/)}),u.prototype.generateContent=function(){return this.$content=e(a()),this},u.prototype.getIframe=function(){return this.$content},u.prototype.getPlayer=function(){return this.youTubePlayer||null},u.prototype.volume=function(t){return void 0===t?this.youTubePlayer&&this.loaded?this.youTubePlayer.getVolume():null:(this.youTubePlayer&&this.loaded&&this.youTubePlayer.setVolume(t),this)},u.prototype.shouldAutoplay=function(){return void 0!==this.autoplay?this.autoplay:(this.autoplay=this.getOption("autoplay"),void 0===this.autoplay&&(this.autoplay=this.mjGallery.getOption(t.OPTIONS.AUTOPLAY_VIDEO)),this.autoplay)},u.prototype.play=function(t){return this.youTubePlayer&&this.loaded&&(t&&this.seekTo(t),this.youTubePlayer.playVideo()),this},u.prototype.pause=function(){return this.youTubePlayer&&this.loaded&&this.youTubePlayer.pauseVideo(),this},u.prototype.seekTo=function(t){return this.youTubePlayer&&this.loaded&&this.youTubePlayer.seekTo(!0===t?this.stoppedAt||0:t||0),this},u.prototype.stop=function(){return this.youTubePlayer&&this.loaded&&this.youTubePlayer.stopVideo(),this},u.prototype.destroy=function(){t.Item.prototype.destroy.call(this),t.EVENT.off(t.EVENT.beforeClose,this.pauseVideoBeforeClose,this.mjGallery)},u.prototype.getVideoId=function(){var t=this.getSrcAttr();if(t=t.split("/").pop(),t.match(/^[A-Za-z0-9_\-]+$/))return t;var e=t.match(/(?:watch\/?\?v=)([A-Za-z0-9_\-]+)/);return e?e[1]:t},u.prototype.load=function(){if(this.loading){if("iframe"!==this.$content[0].tagName.toLowerCase()&&(this.$content=this.$self.find(t.CLASS.selector("itemContent")),"iframe"!==this.$content[0].tagName.toLowerCase()))return this;this.$content.parent().append(this.$content)}if(this.loaded||this.loading||this.isEmpty())return this;var e=function(){this.youTubePlayer=new YT.Player(this.$content[0],{videoId:this.getVideoId(),playerVars:{autoplay:Number(this.current&&this.shouldAutoplay()&&this.mjGallery.isOpened()),rel:0},events:{onReady:function(){this.setAsLoaded(),this.$content=this.$self.find(t.CLASS.selector("itemContent")),setTimeout(this.refreshSize,0),this.mjGallery.on(t.EVENT.beforeClose,this.pauseVideoBeforeClose,this.mjGallery),this.mjGallery.refreshItemInfo(),this.fireLoadEvent();var e=new t.EVENT.Event({item:this.getAPI(),index:this.getIndex(),player:this.getPlayer()},this.mjGallery);t.EVENT.fire(t.EVENT.youtubeReady,e,this.mjGallery),e.isDefaultPrevented()||this.loadEvent.isDefaultPrevented()||this.mjGallery.isClosed()?this.stop():this.current&&this.shouldAutoplay()&&this.play(!0)}.bind(this),onStateChange:function(t){var e=t.data,i=YT.PlayerState;clearInterval(this.saveCurrentTimeInterval),e===i.PLAYING?this.saveCurrentTimeInterval=setInterval(function(){this.stoppedAt=this.youTubePlayer.getCurrentTime()}.bind(this),500):e===i.PAUSED||e===i.BUFFERING?this.stoppedAt=this.youTubePlayer.getCurrentTime():e!==i.UNSTARTED&&e!==i.CUED&&(this.stoppedAt=0)}.bind(this)}})}.bind(this);return o?e():(r(),n.push(e)),this.loading=!0,this},u.prototype.setAsCurrent=function(e,i){return e?t.Item.prototype.setAsCurrent.call(this,e,function(){this.youTubePlayer&&this.loaded&&(this.seekTo(!0),this[this.shouldAutoplay()?"play":this.stoppedAt?"pause":"stop"]()),i()}.bind(this)):(t.Item.prototype.setAsCurrent.apply(this,arguments),this.youTubePlayer&&this.loaded&&(this.seekTo(!0),this[this.shouldAutoplay()?"play":this.stoppedAt?"pause":"stop"]())),this},u.prototype.getTitle=function(){return this.title||this.mjGallery.getOptions().isSetByUser(t.OPTIONS.ITEM_TITLE_SELECTOR)?t.Item.prototype.getTitle.call(this):(this.title=this.getOption("itemTitle")||"",!this.title&&this.loaded&&(this.title=this.youTubePlayer.getVideoData().title||"")),this.title},u.prototype.setAsPrev=function(){t.Item.prototype.setAsPrev.apply(this,arguments);var e=this.youTubePlayer&&this.loaded?this.youTubePlayer.getPlayerState():null;return!window.YT||e!==YT.PlayerState.PLAYING&&e!==YT.PlayerState.BUFFERING||this[this.stoppedAt?"pause":"stop"](),this},u.prototype.setAsNext=function(){t.Item.prototype.setAsNext.apply(this,arguments);var e=this.youTubePlayer&&this.loaded?this.youTubePlayer.getPlayerState():null;return!window.YT||e!==YT.PlayerState.PLAYING&&e!==YT.PlayerState.BUFFERING||this[this.stoppedAt?"pause":"stop"](),this}}(window.mjGallery,jQuery);
